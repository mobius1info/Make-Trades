import{s as x,a as A,b as S}from"./supabase-BZBwCKW6.js";import{l as F,a as j}from"./content-loader-BMv8fMip.js";const z=new URLSearchParams(window.location.search);let u=z.get("lang")||"ru",v={},W={},k=0;function h(t,e){typeof window.gtag=="function"&&window.gtag("event",t,e),typeof window.ym=="function"&&window.ym(parseInt("XXXXXXXX"),"reachGoal",t,e)}async function J(t){var r;u=t,document.documentElement.lang=t,document.querySelectorAll(".lang-btn").forEach(a=>{a.classList.remove("active")}),(r=document.querySelector(`[data-lang="${t}"]`))==null||r.classList.add("active");const e=new URL(window.location.href);e.searchParams.set("lang",t),window.history.replaceState({},"",e.toString()),h("language_changed",{language:t}),v=await F(t),await R(),U(),O()}function i(t,e){return v[t]||e}function q(t,e,r){const a=document.querySelector(t);a&&(a.textContent=i(e,r))}function g(t,e,r){const a=document.getElementById(t);a&&(a.textContent=i(e,r))}async function R(){q(".hero-title","hero.title","Best solution for creating a broker"),q(".hero-subtitle","hero.subtitle","Turnkey creation of brokers, crypto exchanges and dealing centers with MakeTrades"),q(".features-grid .section-title","section.features_title","Full functionality for your broker"),q(".blog-preview .section-title","section.blog_title","Useful articles"),q(".faq-section .section-title","section.faq_title","Frequently asked questions"),q(".cta-content h2","cta.title","Ready to start?"),q(".cta-content p","cta.description","Get a demo account and test all platform features for free"),document.querySelectorAll("#requestDemoBtn, #ctaRequestDemoBtn").forEach(n=>{n.textContent=i("button.request_demo","Request Demo Account")}),document.querySelectorAll(".feature-badge span").forEach((n,l)=>{const m=`hero.badge_${l+1}`;v[m]&&(n.textContent=v[m])}),g("loginBtnText","button.login","Personal Account"),g("priceFrom","pricing.from","From"),g("pricePeriod","pricing.period","per month"),g("allArticlesBtn","button.all_articles","All articles"),g("allFaqBtn","button.all_questions","All questions"),g("demoModalTitle","modal.demo_title","Request Demo Account"),g("copyrightText","footer.copyright","© 2026 MakeTrades. All rights reserved."),g("footerAddressLabel","footer.address","Address"),g("footerPhoneLabel","footer.phone","Phone"),g("footerEmailLabel","footer.email_label","Email"),document.querySelectorAll("[data-feature]").forEach(n=>{const l=n.getAttribute("data-feature"),m=n.querySelector("h3"),f=n.querySelector("p");m&&(m.textContent=i(`feature.${l}.title`,m.textContent||"")),f&&(f.textContent=i(`feature.${l}.desc`,f.textContent||""))}),document.querySelectorAll("[data-detail]").forEach(n=>{const l=n.getAttribute("data-detail"),m=n.querySelector("h2"),f=n.querySelector(".feature-detail-content > p");m&&(m.textContent=i(`detail${l}.title`,m.textContent||"")),f&&(f.textContent=i(`detail${l}.desc`,f.textContent||"")),n.querySelectorAll(".feature-list li").forEach((L,E)=>{const y=L.querySelector("span");y&&(y.textContent=i(`detail${l}.item${E+1}`,y.textContent||""))})}),document.querySelectorAll('[data-translate="form.not_robot"]').forEach(n=>{n.textContent=i("form.not_robot","I am not a robot")});const t=document.querySelector('#demoForm button[type="submit"]');t&&(t.textContent=i("form.request","Request"));const e=document.querySelector('#contactForm button[type="submit"]');e&&(e.textContent=i("form.submit","Submit"));const r=document.getElementById("demoForm");if(r){const n=r.querySelector('input[name="name"]'),l=r.querySelector('input[name="email"]'),m=r.querySelector('input[name="telegram"]');n&&(n.placeholder=i("form.name","Your name")),l&&(l.placeholder=i("form.email","Email")),m&&(m.placeholder=i("form.telegram_required","Telegram"))}document.querySelectorAll('[data-translate="form.broker_experience"]').forEach(n=>{n.textContent=i("form.broker_experience","Have you had experience working as a broker?")}),document.querySelectorAll('[data-translate="form.yes"]').forEach(n=>{n.textContent=i("form.yes","Yes")}),document.querySelectorAll('[data-translate="form.no"]').forEach(n=>{n.textContent=i("form.no","No")}),g("loginModalTitle","login.title","Sign In");const a=document.getElementById("loginForm");if(a){const n=a.querySelector('input[name="email"]'),l=a.querySelector('input[name="password"]');n&&(n.placeholder=i("login.email","Email")),l&&(l.placeholder=i("login.password","Password"))}const s=document.getElementById("loginSubmitBtn");s&&(s.textContent=i("login.button","Log In"));const c=document.getElementById("allArticlesBtn");c&&(c.href=`/blog.html?lang=${u}`);const o=document.getElementById("allFaqBtn");o&&(o.href=`/faq.html?lang=${u}`)}async function U(t=3){const e=document.getElementById("blogGrid");if(e)try{const{data:r,error:a}=await S.from("blog_posts").select("*").eq("language",u).eq("published",!0).order("created_at",{ascending:!1}).limit(t);if(a)throw a;if(!r||r.length===0){e.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${i("blog.empty","Articles coming soon")}</p>`;return}e.innerHTML=r.map(s=>`
      <a href="/blog-post.html?slug=${s.slug}&lang=${u}" class="blog-card fade-in">
        <img src="${s.image_url||"https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=400"}"
             alt="${s.title}"
             class="blog-card-image"
             loading="lazy">
        <div class="blog-card-content">
          <h3>${s.title}</h3>
          <p>${s.excerpt}</p>
          <div class="blog-card-meta">
            <span>${s.author}</span>
            <span>•</span>
            <span>${new Date(s.created_at).toLocaleDateString(u==="ru"?"ru-RU":u==="en"?"en-US":u==="de"?"de-DE":u==="uk"?"uk-UA":u==="zh"?"zh-CN":"en-US")}</span>
          </div>
        </div>
      </a>
    `).join("")}catch(r){console.error("Error loading blog posts:",r),e.innerHTML=`<p style="text-align: center; color: var(--error-500);">${i("blog.error","Error loading articles")}</p>`}}async function O(t=4){const e=document.getElementById("faqList");if(e)try{const{data:r,error:a}=await S.from("faq_items").select("*").eq("language",u).order("order",{ascending:!0}).limit(t);if(a)throw a;if(!r||r.length===0){e.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${i("faq.empty","FAQ coming soon")}</p>`;return}e.innerHTML=r.map(s=>`
      <div class="faq-item fade-in" data-faq-id="${s.id}">
        <div class="faq-question">
          <span>${s.question}</span>
          <span>+</span>
        </div>
        <div class="faq-answer">${s.answer}</div>
      </div>
    `).join(""),document.querySelectorAll(".faq-item").forEach(s=>{s.addEventListener("click",()=>{const c=s.classList.contains("active");if(s.classList.toggle("active"),!c){const o=s.getAttribute("data-faq-id");h("faq_item_opened",{faq_id:o,language:u})}})})}catch(r){console.error("Error loading FAQ items:",r),e.innerHTML=`<p style="text-align: center; color: var(--error-500);">${i("faq.error","Error loading FAQ")}</p>`}}function $(t){t.classList.add("active"),t.setAttribute("aria-hidden","false")}function _(t){t.classList.remove("active"),t.setAttribute("aria-hidden","true")}function Q(){const t=document.getElementById("demoModal"),e=document.getElementById("loginModal"),r=document.getElementById("requestDemoBtn"),a=document.getElementById("ctaRequestDemoBtn"),s=document.querySelector('a[href="#login"]');r==null||r.addEventListener("click",()=>{t&&(k=Date.now(),$(t),h("demo_modal_opened",{language:u}))}),a==null||a.addEventListener("click",()=>{t&&(k=Date.now(),$(t),h("demo_modal_opened",{language:u}))}),s==null||s.addEventListener("click",c=>{c.preventDefault(),e&&($(e),h("login_modal_opened",{language:u}))}),document.querySelectorAll(".modal-close").forEach(c=>{c.addEventListener("click",()=>{const o=c.closest(".modal");o&&_(o)})}),document.querySelectorAll(".modal").forEach(c=>{c.addEventListener("click",o=>{o.target===c&&_(c)})}),document.addEventListener("keydown",c=>{c.key==="Escape"&&document.querySelectorAll(".modal.active").forEach(o=>{_(o)})})}function p(t,e,r){t.querySelectorAll(".form-message").forEach(c=>c.remove());const a=document.createElement("div");a.className=`form-message form-message--${r}`;const s=r==="success"?'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M6 10.5l2.5 2.5 5.5-5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>':'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M10 6v5M10 13.5v.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>';a.innerHTML=`${s}<span>${e}</span>`,t.appendChild(a),requestAnimationFrame(()=>a.classList.add("visible")),r==="success"?setTimeout(()=>{a.classList.remove("visible"),setTimeout(()=>{var c;a.remove(),(c=t.closest(".modal"))==null||c.classList.remove("active")},300)},3e3):setTimeout(()=>{a.classList.remove("visible"),setTimeout(()=>a.remove(),300)},5e3)}function b(t,e){const r=t.closest(".form-field");if(!r)return;I(t),t.classList.add("input-error");const a=document.createElement("div");a.className="field-error",a.textContent=e,r.appendChild(a),requestAnimationFrame(()=>a.classList.add("visible"))}function I(t){var r;const e=t.closest(".form-field");e&&(t.classList.remove("input-error"),(r=e.querySelector(".field-error"))==null||r.remove())}function H(t){t.querySelectorAll(".field-error").forEach(e=>e.remove()),t.querySelectorAll(".input-error").forEach(e=>e.classList.remove("input-error"))}function N(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}async function Y(t){t.preventDefault();const e=t.target;H(e),e.querySelectorAll(".form-message").forEach(n=>n.remove());const r=e.querySelector('input[name="email"]'),a=e.querySelector('input[name="password"]');let s=!1;if(r.value.trim()?N(r.value.trim())||(b(r,i("error.login_email_invalid","Please enter a valid email address")),s=!0):(b(r,i("error.login_email_required","Please enter your email")),s=!0),a.value||(b(a,i("error.login_password_required","Please enter your password")),s=!0),s)return;const c=e.querySelector('button[type="submit"]'),o=c.textContent;c.disabled=!0,c.textContent="...";try{const{data:n,error:l}=await S.auth.signInWithPassword({email:r.value.trim(),password:a.value});if(l){p(e,i("error.login_invalid","Invalid email or password"),"error"),h("login_failed",{language:u});return}const{data:m}=await S.from("admin_users").select("id").eq("id",n.user.id).maybeSingle();if(m){await S.auth.signOut(),p(e,i("error.login_invalid","Invalid email or password"),"error");return}h("login_success",{language:u});const f=document.getElementById("loginModal");f&&_(f),e.reset(),p(e,i("login.success","You have successfully logged in"),"success")}catch{p(e,i("error.login_invalid","Invalid email or password"),"error")}finally{c.disabled=!1,c.textContent=o}}async function K(t){var B;t.preventDefault();const e=t.target;H(e);const r=e.querySelector('input[name="name"]'),a=e.querySelector('input[name="email"]'),s=e.querySelector('input[name="telegram"]'),c=e.querySelector('input[name="broker_experience"]:checked'),o=e.querySelector(".radio-group"),n=e.querySelector('input[name="not_robot"]'),l=n==null?void 0:n.closest(".checkbox-field"),m=(B=l==null?void 0:l.parentElement)==null?void 0:B.querySelector(".checkbox-error");let f=!1;if(r.value.trim()||(b(r,i("error.name_required","Please enter your name")),f=!0),a.value.trim()?N(a.value.trim())||(b(a,i("error.email_invalid","Please enter a valid email address")),f=!0):(b(a,i("error.email_required","Please enter your email")),f=!0),s.value.trim()||(b(s,i("error.telegram_required","Please enter your Telegram")),f=!0),c){const d=o==null?void 0:o.querySelector(".radio-error");d&&d.remove(),o==null||o.classList.remove("has-error")}else{if(!(o==null?void 0:o.querySelector(".radio-error"))){const w=document.createElement("div");w.className="radio-error",w.textContent=i("error.broker_experience_required","Please select an option"),o==null||o.appendChild(w),requestAnimationFrame(()=>w.classList.add("visible"))}o==null||o.classList.add("has-error"),f=!0}if(n&&!n.checked){if(!m){const d=document.createElement("div");d.className="checkbox-error",d.textContent=i("error.robot_check","Please confirm you are not a robot"),l==null||l.after(d),requestAnimationFrame(()=>d.classList.add("visible"))}l==null||l.classList.add("has-error"),f=!0}else m&&m.remove(),l==null||l.classList.remove("has-error");if(f)return;m&&m.remove(),l==null||l.classList.remove("has-error");const L=e.querySelector('input[name="website"]');if(L&&L.value){const d=v["success.demo_submitted"]||"Thank you! We will contact you shortly.";p(e,d,"success"),e.reset();return}if(k&&Date.now()-k<3e3){const d=v["success.demo_submitted"]||"Thank you! We will contact you shortly.";p(e,d,"success"),e.reset();return}const E=new FormData(e),y={name:E.get("name"),email:E.get("email"),telegram:E.get("telegram"),broker_experience:E.get("broker_experience")==="yes"},C=`${x}/rest/v1/demo_requests`,T={"Content-Type":"application/json",apikey:A,Authorization:`Bearer ${A}`,Prefer:"return=minimal"};try{const d=await fetch(C,{method:"POST",headers:T,body:JSON.stringify(y)});if(!d.ok){const X=await d.text().catch(()=>"");throw new Error(`${d.status} ${d.statusText}: ${X} [URL: ${C}]`)}fetch(`${x}/rest/v1/leads`,{method:"POST",headers:T,body:JSON.stringify({name:y.name,email:y.email,telegram:y.telegram,broker_experience:y.broker_experience,source:"demo",language:u})}).catch(()=>{}),h("demo_request_submitted",{language:u,broker_experience:y.broker_experience});const w=v["success.demo_submitted"]||"Thank you! We will contact you shortly.";p(e,w,"success"),e.reset()}catch(d){console.error("Error submitting demo request:",d),p(e,`Error: ${(d==null?void 0:d.message)||"Unknown error"}`,"error")}}async function V(t){t.preventDefault();const e=t.target,r=new FormData(e),a={name:r.get("name"),email:r.get("email"),message:r.get("message"),telegram:r.get("telegram")||null},s=`${x}/rest/v1/contact_submissions`,c={"Content-Type":"application/json",apikey:A,Authorization:`Bearer ${A}`,Prefer:"return=minimal"};try{const o=await fetch(s,{method:"POST",headers:c,body:JSON.stringify(a)});if(!o.ok){const l=await o.json().catch(()=>({message:o.statusText}));throw new Error(l.message||l.error||`HTTP ${o.status}`)}fetch(`${x}/rest/v1/leads`,{method:"POST",headers:c,body:JSON.stringify({name:a.name,email:a.email,telegram:a.telegram,message:a.message,source:"contact",language:u})}).catch(()=>{}),h("contact_form_submitted",{language:u,has_telegram:!!a.telegram});const n=v["success.contact_submitted"]||"Thank you for your message! We will contact you shortly.";p(e,n,"success"),e.reset()}catch(o){console.error("Error submitting contact form:",o),p(e,`Error: ${(o==null?void 0:o.message)||"Unknown error"}`,"error")}}function Z(){document.querySelectorAll(".lang-btn").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-lang");e&&J(e)})})}async function M(){var c;document.documentElement.lang=u,document.querySelectorAll(".lang-btn").forEach(o=>o.classList.remove("active")),(c=document.querySelector(`[data-lang="${u}"]`))==null||c.classList.add("active"),Z(),Q();const t=document.getElementById("demoForm"),e=document.getElementById("contactForm");t==null||t.addEventListener("submit",K),e==null||e.addEventListener("submit",V),[t,e].forEach(o=>{o==null||o.querySelectorAll("input, textarea").forEach(n=>{n.addEventListener("input",()=>I(n))})});const r=t==null?void 0:t.querySelector('input[name="not_robot"]');r==null||r.addEventListener("change",()=>{var l;const o=r.closest(".checkbox-field"),n=(l=o==null?void 0:o.parentElement)==null?void 0:l.querySelector(".checkbox-error");r.checked&&(n==null||n.classList.remove("visible"),setTimeout(()=>n==null?void 0:n.remove(),200),o==null||o.classList.remove("has-error"))}),t==null||t.querySelectorAll('input[name="broker_experience"]').forEach(o=>{o.addEventListener("change",()=>{const n=o.closest(".radio-group"),l=n==null?void 0:n.querySelector(".radio-error");l&&(l.classList.remove("visible"),setTimeout(()=>l.remove(),200)),n==null||n.classList.remove("has-error")})});const a=document.querySelector("#telegram-button a");a==null||a.addEventListener("click",()=>{h("telegram_button_clicked",{language:u})});const s=document.getElementById("loginForm");s==null||s.addEventListener("submit",Y),s==null||s.querySelectorAll("input").forEach(o=>{o.addEventListener("input",()=>I(o))});try{v=await F(u),W=await j(),await R(),U(),O()}catch(o){console.error("Failed to load content:",o)}}function P(){const t=new IntersectionObserver(e=>{e.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),t.unobserve(r.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".reveal, .reveal-left, .reveal-right").forEach(e=>{t.observe(e)})}function D(){const t=document.querySelector(".header");if(!t)return;let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{window.scrollY>50?t.classList.add("scrolled"):t.classList.remove("scrolled"),e=!1}),e=!0)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{M(),P(),D()}):(M(),P(),D());
