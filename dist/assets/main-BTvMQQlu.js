import{s as T,a as B,b as x}from"./supabase-DHWaaCdK.js";import{l as X,a as Z}from"./content-loader-CSxsALxx.js";const G=new URLSearchParams(window.location.search);let m=G.get("lang")||"ru",v={},ee={},$=0,te=Date.now(),j=0,C={mouseMoved:!1,scrolled:!1,clicked:!1};function q(t,e){typeof window.gtag=="function"&&window.gtag("event",t,e),typeof window.ym=="function"&&window.ym(parseInt("XXXXXXXX"),"reachGoal",t,e)}async function re(t){var r;m=t,document.documentElement.lang=t,document.querySelectorAll(".lang-btn").forEach(o=>{o.classList.remove("active")}),(r=document.querySelector(`[data-lang="${t}"]`))==null||r.classList.add("active");const e=new URL(window.location.href);e.searchParams.set("lang",t),window.history.replaceState({},"",e.toString()),q("language_changed",{language:t}),v=await X(t),await z(),Q(),V()}function c(t,e){return v[t]||e}function E(t,e,r){const o=document.querySelector(t);o&&(o.textContent=c(e,r))}function p(t,e,r){const o=document.getElementById(t);o&&(o.textContent=c(e,r))}async function z(){E(".hero-title","hero.title","Best solution for creating a broker"),E(".hero-subtitle","hero.subtitle","Turnkey creation of brokers, crypto exchanges and dealing centers with MakeTrades"),E(".features-grid .section-title","section.features_title","Full functionality for your broker"),E(".blog-preview .section-title","section.blog_title","Useful articles"),E(".faq-section .section-title","section.faq_title","Frequently asked questions"),E(".cta-content h2","cta.title","Ready to start?"),E(".cta-content p","cta.description","Get a demo account and test all platform features for free"),document.querySelectorAll("#requestDemoBtn, #ctaRequestDemoBtn").forEach(n=>{n.textContent=c("button.request_demo","Request Demo Account")}),document.querySelectorAll(".feature-badge span").forEach((n,d)=>{const u=`hero.badge_${d+1}`;v[u]&&(n.textContent=v[u])}),p("loginBtnText","button.login","Personal Account"),p("priceFrom","pricing.from","From"),p("pricePeriod","pricing.period","per month"),p("allArticlesBtn","button.all_articles","All articles"),p("allFaqBtn","button.all_questions","All questions"),p("demoModalTitle","modal.demo_title","Request Demo Account"),p("copyrightText","footer.copyright","© 2026 MakeTrades. All rights reserved."),p("footerAddressLabel","footer.address","Address"),p("footerPhoneLabel","footer.phone","Phone"),p("footerEmailLabel","footer.email_label","Email"),document.querySelectorAll("[data-feature]").forEach(n=>{const d=n.getAttribute("data-feature"),u=n.querySelector("h3"),f=n.querySelector("p");u&&(u.textContent=c(`feature.${d}.title`,u.textContent||"")),f&&(f.textContent=c(`feature.${d}.desc`,f.textContent||""))}),document.querySelectorAll("[data-detail]").forEach(n=>{const d=n.getAttribute("data-detail"),u=n.querySelector("h2"),f=n.querySelector(".feature-detail-content > p");u&&(u.textContent=c(`detail${d}.title`,u.textContent||"")),f&&(f.textContent=c(`detail${d}.desc`,f.textContent||"")),n.querySelectorAll(".feature-list li").forEach((y,_)=>{const L=y.querySelector("span");L&&(L.textContent=c(`detail${d}.item${_+1}`,L.textContent||""))})});const t=document.querySelector('#demoForm button[type="submit"]');t&&(t.textContent=c("form.request","Request"));const e=document.querySelector('#contactForm button[type="submit"]');e&&(e.textContent=c("form.submit","Submit"));const r=document.getElementById("demoForm");if(r){const n=r.querySelector('input[name="name"]'),d=r.querySelector('input[name="email"]'),u=r.querySelector('input[name="telegram"]');n&&(n.placeholder=c("form.name","Your name")),d&&(d.placeholder=c("form.email","Email")),u&&(u.placeholder=c("form.telegram","Telegram (optional)"))}const o=new Set(["form.promo_text"]);document.querySelectorAll("[data-translate]").forEach(n=>{const d=n.getAttribute("data-translate");d&&v[d]&&(o.has(d)?n.innerHTML=v[d]:n.textContent=v[d])}),document.querySelectorAll('[data-translate="form.broker_experience"]').forEach(n=>{n.textContent=c("form.broker_experience","Have you had experience working as a broker?")}),document.querySelectorAll('[data-translate="form.yes"]').forEach(n=>{n.textContent=c("form.yes","Yes")}),document.querySelectorAll('[data-translate="form.no"]').forEach(n=>{n.textContent=c("form.no","No")}),p("loginModalTitle","login.title","Sign In");const a=document.getElementById("loginForm");if(a){const n=a.querySelector('input[name="email"]'),d=a.querySelector('input[name="password"]');n&&(n.placeholder=c("login.email","Email")),d&&(d.placeholder=c("login.password","Password"))}const l=document.getElementById("loginSubmitBtn");l&&(l.textContent=c("login.button","Log In"));const s=document.getElementById("allArticlesBtn");s&&(s.href=`/blog.html?lang=${m}`);const i=document.getElementById("allFaqBtn");i&&(i.href=`/faq.html?lang=${m}`)}async function Q(t=3){const e=document.getElementById("blogGrid");if(e)try{const{data:r,error:o}=await x.from("blog_posts").select("*").eq("language",m).eq("published",!0).order("created_at",{ascending:!1}).limit(t);if(o)throw o;if(!r||r.length===0){e.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${c("blog.empty","Articles coming soon")}</p>`;return}e.innerHTML=r.map(a=>`
      <a href="/blog-post.html?slug=${a.slug}&lang=${m}" class="blog-card fade-in">
        <img src="${a.image_url||"https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=400"}"
             alt="${a.title}"
             class="blog-card-image"
             loading="lazy">
        <div class="blog-card-content">
          <h3>${a.title}</h3>
          <p>${a.excerpt}</p>
          <div class="blog-card-meta">
            <span>${a.author}</span>
            <span>•</span>
            <span>${new Date(a.created_at).toLocaleDateString(m==="ru"?"ru-RU":m==="en"?"en-US":m==="de"?"de-DE":m==="uk"?"uk-UA":m==="zh"?"zh-CN":"en-US")}</span>
          </div>
        </div>
      </a>
    `).join("")}catch(r){console.error("Error loading blog posts:",r),e.innerHTML=`<p style="text-align: center; color: var(--error-500);">${c("blog.error","Error loading articles")}</p>`}}async function V(t=4){const e=document.getElementById("faqList");if(e)try{const{data:r,error:o}=await x.from("faq_items").select("*").eq("language",m).order("order",{ascending:!0}).limit(t);if(o)throw o;if(!r||r.length===0){e.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${c("faq.empty","FAQ coming soon")}</p>`;return}e.innerHTML=r.map(a=>`
      <div class="faq-item fade-in" data-faq-id="${a.id}">
        <div class="faq-question">
          <span>${a.question}</span>
          <span>+</span>
        </div>
        <div class="faq-answer">${a.answer}</div>
      </div>
    `).join(""),document.querySelectorAll(".faq-item").forEach(a=>{a.addEventListener("click",()=>{const l=a.classList.contains("active");if(a.classList.toggle("active"),!l){const s=a.getAttribute("data-faq-id");q("faq_item_opened",{faq_id:s,language:m})}})})}catch(r){console.error("Error loading FAQ items:",r),e.innerHTML=`<p style="text-align: center; color: var(--error-500);">${c("faq.error","Error loading FAQ")}</p>`}}function M(t){t.classList.add("active"),t.setAttribute("aria-hidden","false")}function b(t){t.classList.remove("active"),t.setAttribute("aria-hidden","true")}function oe(){const t=document.getElementById("demoModal"),e=document.getElementById("loginModal"),r=document.getElementById("requestDemoBtn"),o=document.getElementById("ctaRequestDemoBtn"),a=document.querySelector('a[href="#login"]');r==null||r.addEventListener("click",()=>{t&&($=Date.now(),F(),M(t),q("demo_modal_opened",{language:m}))}),o==null||o.addEventListener("click",()=>{t&&($=Date.now(),F(),M(t),q("demo_modal_opened",{language:m}))}),a==null||a.addEventListener("click",l=>{l.preventDefault(),e&&(M(e),q("login_modal_opened",{language:m}))}),document.querySelectorAll(".modal-close").forEach(l=>{l.addEventListener("click",()=>{const s=l.closest(".modal");s&&b(s)})}),document.querySelectorAll(".modal").forEach(l=>{l.addEventListener("click",s=>{s.target===l&&b(l)})}),document.addEventListener("keydown",l=>{l.key==="Escape"&&document.querySelectorAll(".modal.active").forEach(s=>{b(s)})})}function S(t,e,r){t.querySelectorAll(".form-message").forEach(l=>l.remove());const o=document.createElement("div");o.className=`form-message form-message--${r}`;const a=r==="success"?'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M6 10.5l2.5 2.5 5.5-5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>':'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M10 6v5M10 13.5v.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>';o.innerHTML=`${a}<span>${e}</span>`,t.appendChild(o),requestAnimationFrame(()=>o.classList.add("visible")),r==="success"?setTimeout(()=>{o.classList.remove("visible"),setTimeout(()=>{var l;o.remove(),(l=t.closest(".modal"))==null||l.classList.remove("active")},300)},3e3):setTimeout(()=>{o.classList.remove("visible"),setTimeout(()=>o.remove(),300)},5e3)}function A(t,e){const r=t.closest(".form-field");if(!r)return;O(t),t.classList.add("input-error");const o=document.createElement("div");o.className="field-error",o.textContent=e,r.appendChild(o),requestAnimationFrame(()=>o.classList.add("visible"))}function O(t){var r;const e=t.closest(".form-field");e&&(t.classList.remove("input-error"),(r=e.querySelector(".field-error"))==null||r.remove())}function Y(t){t.querySelectorAll(".field-error").forEach(e=>e.remove()),t.querySelectorAll(".input-error").forEach(e=>e.classList.remove("input-error"))}function J(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function P(){const t=document.getElementById("demoModal");t&&b(t);const e=document.getElementById("bonusModal");if(e){M(e);const r=e.querySelector(".modal-close");r==null||r.addEventListener("click",()=>b(e),{once:!0}),e.addEventListener("click",o=>{o.target===e&&b(e)},{once:!0})}}function F(){const t=[()=>{const o=2+Math.floor(Math.random()*18),a=1+Math.floor(Math.random()*o);return{q:`${o} − ${a}`,a:o-a}},()=>{const o=1+Math.floor(Math.random()*12),a=1+Math.floor(Math.random()*12);return{q:`${o} + ${a}`,a:o+a}},()=>{const o=2+Math.floor(Math.random()*9),a=2+Math.floor(Math.random()*5);return{q:`${o} × ${a}`,a:o*a}}],e=t[Math.floor(Math.random()*t.length)]();j=e.a;const r=document.getElementById("captchaQuestion");r&&(r.textContent=e.q+" =")}async function ne(t){t.preventDefault();const e=t.target;Y(e),e.querySelectorAll(".form-message").forEach(i=>i.remove());const r=e.querySelector('input[name="email"]'),o=e.querySelector('input[name="password"]');let a=!1;if(r.value.trim()?J(r.value.trim())||(A(r,c("error.login_email_invalid","Please enter a valid email address")),a=!0):(A(r,c("error.login_email_required","Please enter your email")),a=!0),o.value||(A(o,c("error.login_password_required","Please enter your password")),a=!0),a)return;const l=e.querySelector('button[type="submit"]'),s=l.textContent;l.disabled=!0,l.textContent="...";try{const{data:i,error:n}=await x.auth.signInWithPassword({email:r.value.trim(),password:o.value});if(n){S(e,c("error.login_invalid","Invalid email or password"),"error"),q("login_failed",{language:m});return}const{data:d}=await x.from("admin_users").select("id").eq("id",i.user.id).maybeSingle();if(d){await x.auth.signOut(),S(e,c("error.login_invalid","Invalid email or password"),"error");return}q("login_success",{language:m});const u=document.getElementById("loginModal");u&&b(u),e.reset(),S(e,c("login.success","You have successfully logged in"),"success")}catch{S(e,c("error.login_invalid","Invalid email or password"),"error")}finally{l.disabled=!1,l.textContent=s}}function ae(t){t&&(t.querySelectorAll(".custom-select").forEach(e=>{var s;const r=e.querySelector(".custom-select-trigger"),o=e.querySelectorAll(".custom-select-option"),a=(s=e.closest(".custom-select-group"))==null?void 0:s.querySelector('input[type="hidden"]'),l=e.querySelector(".custom-select-value");r.addEventListener("click",i=>{i.stopPropagation();const n=e.classList.contains("open");document.querySelectorAll(".custom-select.open").forEach(d=>d.classList.remove("open")),n||e.classList.add("open")}),o.forEach(i=>{i.addEventListener("click",n=>{n.stopPropagation(),o.forEach(f=>f.classList.remove("active")),i.classList.add("active"),a&&(a.value=i.dataset.value||""),l.textContent=i.textContent||"",e.classList.add("selected"),e.classList.remove("open","has-error");const d=e.closest(".custom-select-group"),u=d==null?void 0:d.querySelector(".select-error");u&&(u.classList.remove("visible"),setTimeout(()=>u.remove(),200))})}),e.addEventListener("keydown",i=>{i.key==="Enter"||i.key===" "?(i.preventDefault(),r.click()):i.key==="Escape"&&e.classList.remove("open")})}),document.addEventListener("click",()=>{document.querySelectorAll(".custom-select.open").forEach(e=>e.classList.remove("open"))}))}function D(t){t.querySelectorAll(".custom-select").forEach(e=>{e.classList.remove("selected","open","has-error");const r=e.querySelector(".custom-select-value"),o=r==null?void 0:r.getAttribute("data-translate");r&&o&&(r.textContent=v[o]||r.textContent),e.querySelectorAll(".custom-select-option.active").forEach(a=>a.classList.remove("active"))}),t.querySelectorAll('.custom-select-group input[type="hidden"]').forEach(e=>{e.value=""})}async function se(t){t.preventDefault();const e=t.target;Y(e);const r=e.querySelector('input[name="name"]'),o=e.querySelector('input[name="email"]');e.querySelector('input[name="telegram"]');const a=e.querySelector('input[name="referral_source"]'),l=e.querySelector(".custom-select"),s=e.querySelector(".custom-select-group"),i=e.querySelector('input[name="broker_experience"]:checked'),n=e.querySelector(".radio-group"),d=e.querySelector("#captchaAnswer"),u=e.querySelector("#captchaField");let f=!1;if(r.value.trim()||(A(r,c("error.name_required","Please enter your name")),f=!0),o.value.trim()?J(o.value.trim())||(A(o,c("error.email_invalid","Please enter a valid email address")),f=!0):(A(o,c("error.email_required","Please enter your email")),f=!0),a.value){const h=s==null?void 0:s.querySelector(".select-error");h&&h.remove(),l==null||l.classList.remove("has-error")}else{if(!(s==null?void 0:s.querySelector(".select-error"))){const g=document.createElement("div");g.className="select-error",g.textContent=c("error.referral_required","Please select how you heard about us"),s==null||s.appendChild(g),requestAnimationFrame(()=>g.classList.add("visible"))}l==null||l.classList.add("has-error"),f=!0}if(i){const h=n==null?void 0:n.querySelector(".radio-error");h&&h.remove(),n==null||n.classList.remove("has-error")}else{if(!(n==null?void 0:n.querySelector(".radio-error"))){const g=document.createElement("div");g.className="radio-error",g.textContent=c("error.broker_experience_required","Please select an option"),n==null||n.appendChild(g),requestAnimationFrame(()=>g.classList.add("visible"))}n==null||n.classList.add("has-error"),f=!0}if(d&&u){const h=parseInt(d.value.trim(),10),g=u.querySelector(".captcha-error");if(isNaN(h)||h!==j){if(!g){const I=document.createElement("div");I.className="captcha-error",I.textContent=c("error.captcha_wrong","Wrong answer, try again"),u.appendChild(I),requestAnimationFrame(()=>I.classList.add("visible"))}u.classList.add("has-error"),F(),d.value="",f=!0}else g&&g.remove(),u.classList.remove("has-error")}if(f)return;const y=e.querySelector('button[type="submit"]'),_=y.textContent;y.disabled=!0,y.textContent="...";const L=e.querySelector('input[name="website"]');if(L&&L.value){e.reset(),D(e),P(),y.disabled=!1,y.textContent=_;return}if($&&Date.now()-$<3e3){e.reset(),D(e),P(),y.disabled=!1,y.textContent=_;return}const k=new FormData(e),w={name:k.get("name"),email:k.get("email"),telegram:k.get("telegram")||null,broker_experience:k.get("broker_experience")==="yes",referral_source:k.get("referral_source")},K=`${T}/rest/v1/demo_requests`,R={"Content-Type":"application/json",apikey:B,Authorization:`Bearer ${B}`,Prefer:"return=minimal"};try{await fetch(K,{method:"POST",headers:R,body:JSON.stringify(w)}),fetch(`${T}/rest/v1/leads`,{method:"POST",headers:R,body:JSON.stringify({name:w.name,email:w.email,telegram:w.telegram,broker_experience:w.broker_experience,referral_source:w.referral_source,source:"demo",language:m})}).catch(()=>{})}catch{}finally{y.disabled=!1,y.textContent=_}e.reset(),D(e),P()}async function le(t){t.preventDefault();const e=t.target,r=new FormData(e),o={name:r.get("name"),email:r.get("email"),message:r.get("message"),telegram:r.get("telegram")||null},a=e.querySelector('button[type="submit"]'),l=a.textContent;a.disabled=!0,a.textContent="...";const s=`${T}/rest/v1/contact_submissions`,i={"Content-Type":"application/json",apikey:B,Authorization:`Bearer ${B}`,Prefer:"return=minimal"};try{const{data:n}=await x.rpc("check_recent_submission",{p_email:o.email,p_telegram:o.telegram});if(n!=null&&n.is_duplicate){S(e,c("error.duplicate_submission","You have already submitted a request. Please wait 24 hours before submitting again."),"error");return}const d=await fetch(s,{method:"POST",headers:i,body:JSON.stringify(o)});if(!d.ok){const f=await d.json().catch(()=>({message:d.statusText}));throw new Error(f.message||f.error||`HTTP ${d.status}`)}fetch(`${T}/rest/v1/leads`,{method:"POST",headers:i,body:JSON.stringify({name:o.name,email:o.email,telegram:o.telegram,message:o.message,source:"contact",language:m})}).catch(()=>{}),q("contact_form_submitted",{language:m,has_telegram:!!o.telegram});const u=v["success.contact_submitted"]||"Thank you for your message! We will contact you shortly.";S(e,u,"success"),e.reset()}catch(n){console.error("Error submitting contact form:",n),S(e,`Error: ${(n==null?void 0:n.message)||"Unknown error"}`,"error")}finally{a.disabled=!1,a.textContent=l}}function ie(){document.querySelectorAll(".lang-btn").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-lang");e&&re(e)})})}function ce(){const t=Date.now()-te,e=C.mouseMoved||C.scrolled;t<2e3||!e?de():W()}function W(){const t=document.querySelector("#telegram-button a"),e=t==null?void 0:t.getAttribute("data-telegram-link");e&&(q("telegram_button_clicked",{language:m,verified:!0}),window.open(e,"_blank","noopener,noreferrer"))}function de(){const t=document.getElementById("verifyModal"),e=document.getElementById("confirmVerify"),r=document.getElementById("verifyTimer");if(!t||!e||!r)return;let o=3;r.textContent=o.toString(),e.setAttribute("disabled","true");const a=setInterval(()=>{o--,r.textContent=o.toString(),o<=0&&(clearInterval(a),e.removeAttribute("disabled"),r.parentElement.textContent=c("button.confirm","Подтвердить"))},1e3);M(t)}function ue(){const t=document.getElementById("verifyModal"),e=document.getElementById("confirmVerify"),r=document.getElementById("cancelVerify");e==null||e.addEventListener("click",()=>{t&&b(t),W()}),r==null||r.addEventListener("click",()=>{t&&b(t)})}function me(){let t;document.addEventListener("mousemove",()=>{clearTimeout(t),t=window.setTimeout(()=>{C.mouseMoved=!0},100)},{once:!0}),document.addEventListener("scroll",()=>{C.scrolled=!0},{once:!0}),document.addEventListener("click",()=>{C.clicked=!0},{once:!0})}async function H(){var l;document.documentElement.lang=m,document.querySelectorAll(".lang-btn").forEach(s=>s.classList.remove("active")),(l=document.querySelector(`[data-lang="${m}"]`))==null||l.classList.add("active"),me(),ie(),oe();const t=document.getElementById("demoForm"),e=document.getElementById("contactForm");t==null||t.addEventListener("submit",se),e==null||e.addEventListener("submit",le),[t,e].forEach(s=>{s==null||s.querySelectorAll("input, textarea").forEach(i=>{i.addEventListener("input",()=>O(i))})});const r=t==null?void 0:t.querySelector("#captchaAnswer");r==null||r.addEventListener("input",()=>{const s=document.getElementById("captchaField"),i=s==null?void 0:s.querySelector(".captcha-error");i&&(i.classList.remove("visible"),setTimeout(()=>i.remove(),200)),s==null||s.classList.remove("has-error")}),F(),ae(t),t==null||t.querySelectorAll('input[name="broker_experience"]').forEach(s=>{s.addEventListener("change",()=>{const i=s.closest(".radio-group"),n=i==null?void 0:i.querySelector(".radio-error");n&&(n.classList.remove("visible"),setTimeout(()=>n.remove(),200)),i==null||i.classList.remove("has-error")})});const o=document.querySelector("#telegram-button a");o==null||o.addEventListener("click",s=>{s.preventDefault(),ce()}),ue();const a=document.getElementById("loginForm");a==null||a.addEventListener("submit",ne),a==null||a.querySelectorAll("input").forEach(s=>{s.addEventListener("input",()=>O(s))});try{v=await X(m),ee=await Z(),await z(),Q(),V()}catch(s){console.error("Failed to load content:",s)}}function N(){const t=new IntersectionObserver(e=>{e.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),t.unobserve(r.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".reveal, .reveal-left, .reveal-right").forEach(e=>{t.observe(e)})}function U(){const t=document.querySelector(".header");if(!t)return;let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{window.scrollY>50?t.classList.add("scrolled"):t.classList.remove("scrolled"),e=!1}),e=!0)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{H(),N(),U()}):(H(),N(),U());
