import{s as T,a as $,b as k}from"./supabase-Bv6V6ciD.js";import{l as H,a as Q}from"./content-loader-DI9ghJP_.js";const Y=new URLSearchParams(window.location.search);let g=Y.get("lang")||"ru",y={},K={},M=0,Z=Date.now(),C={mouseMoved:!1,scrolled:!1,clicked:!1};function E(t,e){typeof window.gtag=="function"&&window.gtag("event",t,e),typeof window.ym=="function"&&window.ym(parseInt("XXXXXXXX"),"reachGoal",t,e)}async function G(t){var r;g=t,document.documentElement.lang=t,document.querySelectorAll(".lang-btn").forEach(o=>{o.classList.remove("active")}),(r=document.querySelector(`[data-lang="${t}"]`))==null||r.classList.add("active");const e=new URL(window.location.href);e.searchParams.set("lang",t),window.history.replaceState({},"",e.toString()),E("language_changed",{language:t}),y=await H(t),await N(),X(),j()}function c(t,e){return y[t]||e}function L(t,e,r){const o=document.querySelector(t);o&&(o.textContent=c(e,r))}function v(t,e,r){const o=document.getElementById(t);o&&(o.textContent=c(e,r))}async function N(){L(".hero-title","hero.title","Best solution for creating a broker"),L(".hero-subtitle","hero.subtitle","Turnkey creation of brokers, crypto exchanges and dealing centers with MakeTrades"),L(".features-grid .section-title","section.features_title","Full functionality for your broker"),L(".blog-preview .section-title","section.blog_title","Useful articles"),L(".faq-section .section-title","section.faq_title","Frequently asked questions"),L(".cta-content h2","cta.title","Ready to start?"),L(".cta-content p","cta.description","Get a demo account and test all platform features for free"),document.querySelectorAll("#requestDemoBtn, #ctaRequestDemoBtn").forEach(l=>{l.textContent=c("button.request_demo","Request Demo Account")}),document.querySelectorAll(".feature-badge span").forEach((l,i)=>{const d=`hero.badge_${i+1}`;y[d]&&(l.textContent=y[d])}),v("loginBtnText","button.login","Personal Account"),v("priceFrom","pricing.from","From"),v("pricePeriod","pricing.period","per month"),v("allArticlesBtn","button.all_articles","All articles"),v("allFaqBtn","button.all_questions","All questions"),v("demoModalTitle","modal.demo_title","Request Demo Account"),v("copyrightText","footer.copyright","© 2026 MakeTrades. All rights reserved."),v("footerAddressLabel","footer.address","Address"),v("footerPhoneLabel","footer.phone","Phone"),v("footerEmailLabel","footer.email_label","Email"),document.querySelectorAll("[data-feature]").forEach(l=>{const i=l.getAttribute("data-feature"),d=l.querySelector("h3"),f=l.querySelector("p");d&&(d.textContent=c(`feature.${i}.title`,d.textContent||"")),f&&(f.textContent=c(`feature.${i}.desc`,f.textContent||""))}),document.querySelectorAll("[data-detail]").forEach(l=>{const i=l.getAttribute("data-detail"),d=l.querySelector("h2"),f=l.querySelector(".feature-detail-content > p");d&&(d.textContent=c(`detail${i}.title`,d.textContent||"")),f&&(f.textContent=c(`detail${i}.desc`,f.textContent||"")),l.querySelectorAll(".feature-list li").forEach((b,h)=>{const _=b.querySelector("span");_&&(_.textContent=c(`detail${i}.item${h+1}`,_.textContent||""))})}),document.querySelectorAll('[data-translate="form.not_robot"]').forEach(l=>{l.textContent=c("form.not_robot","I am not a robot")});const t=document.querySelector('#demoForm button[type="submit"]');t&&(t.textContent=c("form.request","Request"));const e=document.querySelector('#contactForm button[type="submit"]');e&&(e.textContent=c("form.submit","Submit"));const r=document.getElementById("demoForm");if(r){const l=r.querySelector('input[name="name"]'),i=r.querySelector('input[name="email"]'),d=r.querySelector('input[name="telegram"]');l&&(l.placeholder=c("form.name","Your name")),i&&(i.placeholder=c("form.email","Email")),d&&(d.placeholder=c("form.telegram_required","Telegram"))}const o=new Set(["form.promo_text"]);document.querySelectorAll("[data-translate]").forEach(l=>{const i=l.getAttribute("data-translate");i&&y[i]&&(o.has(i)?l.innerHTML=y[i]:l.textContent=y[i])}),document.querySelectorAll('[data-translate="form.broker_experience"]').forEach(l=>{l.textContent=c("form.broker_experience","Have you had experience working as a broker?")}),document.querySelectorAll('[data-translate="form.yes"]').forEach(l=>{l.textContent=c("form.yes","Yes")}),document.querySelectorAll('[data-translate="form.no"]').forEach(l=>{l.textContent=c("form.no","No")}),v("loginModalTitle","login.title","Sign In");const a=document.getElementById("loginForm");if(a){const l=a.querySelector('input[name="email"]'),i=a.querySelector('input[name="password"]');l&&(l.placeholder=c("login.email","Email")),i&&(i.placeholder=c("login.password","Password"))}const u=document.getElementById("loginSubmitBtn");u&&(u.textContent=c("login.button","Log In"));const n=document.getElementById("allArticlesBtn");n&&(n.href=`/blog.html?lang=${g}`);const s=document.getElementById("allFaqBtn");s&&(s.href=`/faq.html?lang=${g}`)}async function X(t=3){const e=document.getElementById("blogGrid");if(e)try{const{data:r,error:o}=await k.from("blog_posts").select("*").eq("language",g).eq("published",!0).order("created_at",{ascending:!1}).limit(t);if(o)throw o;if(!r||r.length===0){e.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${c("blog.empty","Articles coming soon")}</p>`;return}e.innerHTML=r.map(a=>`
      <a href="/blog-post.html?slug=${a.slug}&lang=${g}" class="blog-card fade-in">
        <img src="${a.image_url||"https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=400"}"
             alt="${a.title}"
             class="blog-card-image"
             loading="lazy">
        <div class="blog-card-content">
          <h3>${a.title}</h3>
          <p>${a.excerpt}</p>
          <div class="blog-card-meta">
            <span>${a.author}</span>
            <span>•</span>
            <span>${new Date(a.created_at).toLocaleDateString(g==="ru"?"ru-RU":g==="en"?"en-US":g==="de"?"de-DE":g==="uk"?"uk-UA":g==="zh"?"zh-CN":"en-US")}</span>
          </div>
        </div>
      </a>
    `).join("")}catch(r){console.error("Error loading blog posts:",r),e.innerHTML=`<p style="text-align: center; color: var(--error-500);">${c("blog.error","Error loading articles")}</p>`}}async function j(t=4){const e=document.getElementById("faqList");if(e)try{const{data:r,error:o}=await k.from("faq_items").select("*").eq("language",g).order("order",{ascending:!0}).limit(t);if(o)throw o;if(!r||r.length===0){e.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${c("faq.empty","FAQ coming soon")}</p>`;return}e.innerHTML=r.map(a=>`
      <div class="faq-item fade-in" data-faq-id="${a.id}">
        <div class="faq-question">
          <span>${a.question}</span>
          <span>+</span>
        </div>
        <div class="faq-answer">${a.answer}</div>
      </div>
    `).join(""),document.querySelectorAll(".faq-item").forEach(a=>{a.addEventListener("click",()=>{const u=a.classList.contains("active");if(a.classList.toggle("active"),!u){const n=a.getAttribute("data-faq-id");E("faq_item_opened",{faq_id:n,language:g})}})})}catch(r){console.error("Error loading FAQ items:",r),e.innerHTML=`<p style="text-align: center; color: var(--error-500);">${c("faq.error","Error loading FAQ")}</p>`}}function I(t){t.classList.add("active"),t.setAttribute("aria-hidden","false")}function A(t){t.classList.remove("active"),t.setAttribute("aria-hidden","true")}function ee(){const t=document.getElementById("demoModal"),e=document.getElementById("loginModal"),r=document.getElementById("requestDemoBtn"),o=document.getElementById("ctaRequestDemoBtn"),a=document.querySelector('a[href="#login"]');r==null||r.addEventListener("click",()=>{t&&(M=Date.now(),I(t),E("demo_modal_opened",{language:g}))}),o==null||o.addEventListener("click",()=>{t&&(M=Date.now(),I(t),E("demo_modal_opened",{language:g}))}),a==null||a.addEventListener("click",u=>{u.preventDefault(),e&&(I(e),E("login_modal_opened",{language:g}))}),document.querySelectorAll(".modal-close").forEach(u=>{u.addEventListener("click",()=>{const n=u.closest(".modal");n&&A(n)})}),document.querySelectorAll(".modal").forEach(u=>{u.addEventListener("click",n=>{n.target===u&&A(u)})}),document.addEventListener("keydown",u=>{u.key==="Escape"&&document.querySelectorAll(".modal.active").forEach(n=>{A(n)})})}function q(t,e,r){t.querySelectorAll(".form-message").forEach(u=>u.remove());const o=document.createElement("div");o.className=`form-message form-message--${r}`;const a=r==="success"?'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M6 10.5l2.5 2.5 5.5-5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>':'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M10 6v5M10 13.5v.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>';o.innerHTML=`${a}<span>${e}</span>`,t.appendChild(o),requestAnimationFrame(()=>o.classList.add("visible")),r==="success"?setTimeout(()=>{o.classList.remove("visible"),setTimeout(()=>{var u;o.remove(),(u=t.closest(".modal"))==null||u.classList.remove("active")},300)},3e3):setTimeout(()=>{o.classList.remove("visible"),setTimeout(()=>o.remove(),300)},5e3)}function w(t,e){const r=t.closest(".form-field");if(!r)return;B(t),t.classList.add("input-error");const o=document.createElement("div");o.className="field-error",o.textContent=e,r.appendChild(o),requestAnimationFrame(()=>o.classList.add("visible"))}function B(t){var r;const e=t.closest(".form-field");e&&(t.classList.remove("input-error"),(r=e.querySelector(".field-error"))==null||r.remove())}function z(t){t.querySelectorAll(".field-error").forEach(e=>e.remove()),t.querySelectorAll(".input-error").forEach(e=>e.classList.remove("input-error"))}function V(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}async function te(t){t.preventDefault();const e=t.target;z(e),e.querySelectorAll(".form-message").forEach(s=>s.remove());const r=e.querySelector('input[name="email"]'),o=e.querySelector('input[name="password"]');let a=!1;if(r.value.trim()?V(r.value.trim())||(w(r,c("error.login_email_invalid","Please enter a valid email address")),a=!0):(w(r,c("error.login_email_required","Please enter your email")),a=!0),o.value||(w(o,c("error.login_password_required","Please enter your password")),a=!0),a)return;const u=e.querySelector('button[type="submit"]'),n=u.textContent;u.disabled=!0,u.textContent="...";try{const{data:s,error:l}=await k.auth.signInWithPassword({email:r.value.trim(),password:o.value});if(l){q(e,c("error.login_invalid","Invalid email or password"),"error"),E("login_failed",{language:g});return}const{data:i}=await k.from("admin_users").select("id").eq("id",s.user.id).maybeSingle();if(i){await k.auth.signOut(),q(e,c("error.login_invalid","Invalid email or password"),"error");return}E("login_success",{language:g});const d=document.getElementById("loginModal");d&&A(d),e.reset(),q(e,c("login.success","You have successfully logged in"),"success")}catch{q(e,c("error.login_invalid","Invalid email or password"),"error")}finally{u.disabled=!1,u.textContent=n}}function re(t){t&&(t.querySelectorAll(".custom-select").forEach(e=>{var n;const r=e.querySelector(".custom-select-trigger"),o=e.querySelectorAll(".custom-select-option"),a=(n=e.closest(".custom-select-group"))==null?void 0:n.querySelector('input[type="hidden"]'),u=e.querySelector(".custom-select-value");r.addEventListener("click",s=>{s.stopPropagation();const l=e.classList.contains("open");document.querySelectorAll(".custom-select.open").forEach(i=>i.classList.remove("open")),l||e.classList.add("open")}),o.forEach(s=>{s.addEventListener("click",l=>{l.stopPropagation(),o.forEach(f=>f.classList.remove("active")),s.classList.add("active"),a&&(a.value=s.dataset.value||""),u.textContent=s.textContent||"",e.classList.add("selected"),e.classList.remove("open","has-error");const i=e.closest(".custom-select-group"),d=i==null?void 0:i.querySelector(".select-error");d&&(d.classList.remove("visible"),setTimeout(()=>d.remove(),200))})}),e.addEventListener("keydown",s=>{s.key==="Enter"||s.key===" "?(s.preventDefault(),r.click()):s.key==="Escape"&&e.classList.remove("open")})}),document.addEventListener("click",()=>{document.querySelectorAll(".custom-select.open").forEach(e=>e.classList.remove("open"))}))}function oe(t){t.querySelectorAll(".custom-select").forEach(e=>{e.classList.remove("selected","open","has-error");const r=e.querySelector(".custom-select-value"),o=r==null?void 0:r.getAttribute("data-translate");r&&o&&(r.textContent=y[o]||r.textContent),e.querySelectorAll(".custom-select-option.active").forEach(a=>a.classList.remove("active"))}),t.querySelectorAll('.custom-select-group input[type="hidden"]').forEach(e=>{e.value=""})}async function ne(t){var F;t.preventDefault();const e=t.target;z(e);const r=e.querySelector('input[name="name"]'),o=e.querySelector('input[name="email"]'),a=e.querySelector('input[name="telegram"]'),u=e.querySelector('input[name="referral_source"]'),n=e.querySelector(".custom-select"),s=e.querySelector(".custom-select-group"),l=e.querySelector('input[name="broker_experience"]:checked'),i=e.querySelector(".radio-group"),d=e.querySelector('input[name="not_robot"]'),f=d==null?void 0:d.closest(".checkbox-field"),b=(F=f==null?void 0:f.parentElement)==null?void 0:F.querySelector(".checkbox-error");let h=!1;if(r.value.trim()||(w(r,c("error.name_required","Please enter your name")),h=!0),o.value.trim()?V(o.value.trim())||(w(o,c("error.email_invalid","Please enter a valid email address")),h=!0):(w(o,c("error.email_required","Please enter your email")),h=!0),a.value.trim()||(w(a,c("error.telegram_required","Please enter your Telegram")),h=!0),u.value){const m=s==null?void 0:s.querySelector(".select-error");m&&m.remove(),n==null||n.classList.remove("has-error")}else{if(!(s==null?void 0:s.querySelector(".select-error"))){const p=document.createElement("div");p.className="select-error",p.textContent=c("error.referral_required","Please select how you heard about us"),s==null||s.appendChild(p),requestAnimationFrame(()=>p.classList.add("visible"))}n==null||n.classList.add("has-error"),h=!0}if(l){const m=i==null?void 0:i.querySelector(".radio-error");m&&m.remove(),i==null||i.classList.remove("has-error")}else{if(!(i==null?void 0:i.querySelector(".radio-error"))){const p=document.createElement("div");p.className="radio-error",p.textContent=c("error.broker_experience_required","Please select an option"),i==null||i.appendChild(p),requestAnimationFrame(()=>p.classList.add("visible"))}i==null||i.classList.add("has-error"),h=!0}if(d&&!d.checked){if(!b){const m=document.createElement("div");m.className="checkbox-error",m.textContent=c("error.robot_check","Please confirm you are not a robot"),f==null||f.after(m),requestAnimationFrame(()=>m.classList.add("visible"))}f==null||f.classList.add("has-error"),h=!0}else b&&b.remove(),f==null||f.classList.remove("has-error");if(h)return;b&&b.remove(),f==null||f.classList.remove("has-error");const _=e.querySelector('input[name="website"]');if(_&&_.value){const m=y["success.demo_submitted"]||"Thank you! We will contact you shortly.";q(e,m,"success"),e.reset();return}if(M&&Date.now()-M<3e3){const m=y["success.demo_submitted"]||"Thank you! We will contact you shortly.";q(e,m,"success"),e.reset();return}const x=new FormData(e),S={name:x.get("name"),email:x.get("email"),telegram:x.get("telegram"),broker_experience:x.get("broker_experience")==="yes",referral_source:x.get("referral_source")},P=`${T}/rest/v1/demo_requests`,D={"Content-Type":"application/json",apikey:$,Authorization:`Bearer ${$}`,Prefer:"return=minimal"};try{const m=await fetch(P,{method:"POST",headers:D,body:JSON.stringify(S)});if(!m.ok){const J=await m.text().catch(()=>"");throw new Error(`${m.status} ${m.statusText}: ${J} [URL: ${P}]`)}fetch(`${T}/rest/v1/leads`,{method:"POST",headers:D,body:JSON.stringify({name:S.name,email:S.email,telegram:S.telegram,broker_experience:S.broker_experience,referral_source:S.referral_source,source:"demo",language:g})}).catch(()=>{}),E("demo_request_submitted",{language:g,broker_experience:S.broker_experience});const p=y["success.demo_submitted"]||"Thank you! We will contact you shortly.";q(e,p,"success"),e.reset(),oe(e)}catch(m){console.error("Error submitting demo request:",m),q(e,`Error: ${(m==null?void 0:m.message)||"Unknown error"}`,"error")}}async function ae(t){t.preventDefault();const e=t.target,r=new FormData(e),o={name:r.get("name"),email:r.get("email"),message:r.get("message"),telegram:r.get("telegram")||null},a=`${T}/rest/v1/contact_submissions`,u={"Content-Type":"application/json",apikey:$,Authorization:`Bearer ${$}`,Prefer:"return=minimal"};try{const n=await fetch(a,{method:"POST",headers:u,body:JSON.stringify(o)});if(!n.ok){const l=await n.json().catch(()=>({message:n.statusText}));throw new Error(l.message||l.error||`HTTP ${n.status}`)}fetch(`${T}/rest/v1/leads`,{method:"POST",headers:u,body:JSON.stringify({name:o.name,email:o.email,telegram:o.telegram,message:o.message,source:"contact",language:g})}).catch(()=>{}),E("contact_form_submitted",{language:g,has_telegram:!!o.telegram});const s=y["success.contact_submitted"]||"Thank you for your message! We will contact you shortly.";q(e,s,"success"),e.reset()}catch(n){console.error("Error submitting contact form:",n),q(e,`Error: ${(n==null?void 0:n.message)||"Unknown error"}`,"error")}}function se(){document.querySelectorAll(".lang-btn").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-lang");e&&G(e)})})}function le(){const t=Date.now()-Z,e=C.mouseMoved||C.scrolled;t<2e3||!e?ie():W()}function W(){const t=document.querySelector("#telegram-button a"),e=t==null?void 0:t.getAttribute("data-telegram-link");e&&(E("telegram_button_clicked",{language:g,verified:!0}),window.open(e,"_blank","noopener,noreferrer"))}function ie(){const t=document.getElementById("verifyModal"),e=document.getElementById("confirmVerify"),r=document.getElementById("verifyTimer");if(!t||!e||!r)return;let o=3;r.textContent=o.toString(),e.setAttribute("disabled","true");const a=setInterval(()=>{o--,r.textContent=o.toString(),o<=0&&(clearInterval(a),e.removeAttribute("disabled"),r.parentElement.textContent=c("button.confirm","Подтвердить"))},1e3);I(t)}function ce(){const t=document.getElementById("verifyModal"),e=document.getElementById("confirmVerify"),r=document.getElementById("cancelVerify");e==null||e.addEventListener("click",()=>{t&&A(t),W()}),r==null||r.addEventListener("click",()=>{t&&A(t)})}function ue(){let t;document.addEventListener("mousemove",()=>{clearTimeout(t),t=window.setTimeout(()=>{C.mouseMoved=!0},100)},{once:!0}),document.addEventListener("scroll",()=>{C.scrolled=!0},{once:!0}),document.addEventListener("click",()=>{C.clicked=!0},{once:!0})}async function O(){var u;document.documentElement.lang=g,document.querySelectorAll(".lang-btn").forEach(n=>n.classList.remove("active")),(u=document.querySelector(`[data-lang="${g}"]`))==null||u.classList.add("active"),ue(),se(),ee();const t=document.getElementById("demoForm"),e=document.getElementById("contactForm");t==null||t.addEventListener("submit",ne),e==null||e.addEventListener("submit",ae),[t,e].forEach(n=>{n==null||n.querySelectorAll("input, textarea").forEach(s=>{s.addEventListener("input",()=>B(s))})});const r=t==null?void 0:t.querySelector('input[name="not_robot"]');r==null||r.addEventListener("change",()=>{var l;const n=r.closest(".checkbox-field"),s=(l=n==null?void 0:n.parentElement)==null?void 0:l.querySelector(".checkbox-error");r.checked&&(s==null||s.classList.remove("visible"),setTimeout(()=>s==null?void 0:s.remove(),200),n==null||n.classList.remove("has-error"))}),re(t),t==null||t.querySelectorAll('input[name="broker_experience"]').forEach(n=>{n.addEventListener("change",()=>{const s=n.closest(".radio-group"),l=s==null?void 0:s.querySelector(".radio-error");l&&(l.classList.remove("visible"),setTimeout(()=>l.remove(),200)),s==null||s.classList.remove("has-error")})});const o=document.querySelector("#telegram-button a");o==null||o.addEventListener("click",n=>{n.preventDefault(),le()}),ce();const a=document.getElementById("loginForm");a==null||a.addEventListener("submit",te),a==null||a.querySelectorAll("input").forEach(n=>{n.addEventListener("input",()=>B(n))});try{y=await H(g),K=await Q(),await N(),X(),j()}catch(n){console.error("Failed to load content:",n)}}function R(){const t=new IntersectionObserver(e=>{e.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),t.unobserve(r.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".reveal, .reveal-left, .reveal-right").forEach(e=>{t.observe(e)})}function U(){const t=document.querySelector(".header");if(!t)return;let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{window.scrollY>50?t.classList.add("scrolled"):t.classList.remove("scrolled"),e=!1}),e=!0)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{O(),R(),U()}):(O(),R(),U());
