import{s as b}from"./supabase-Oy0nagOi.js";import{l as L}from"./content-loader-xWymZvdG.js";const k=new URLSearchParams(window.location.search);let g=k.get("lang")||"ru",_={};function c(e,a){return _[e]||a}function I(){return{ru:"ru-RU",en:"en-US",de:"de-DE",uk:"uk-UA",zh:"zh-CN"}[g]||"en-US"}function w(){return k.get("slug")}function S(){const e=(r,t,n)=>{const s=document.getElementById(r);s&&(s.textContent=c(t,n))};e("loadingText","blog_post.loading","Loading article..."),e("errorTitle","blog_post.not_found_title","Article not found"),e("errorDesc","blog_post.not_found_desc","Unfortunately, the requested article was not found."),e("errorBackBtn","blog_post.back_to_blog","Back to blog"),e("backBlogBtn","button.blog","Blog"),e("authorRole","blog_post.author_role","MakeTrades Expert"),e("postCtaTitle","blog_post.cta_title","Ready to launch your brokerage platform?"),e("postCtaDesc","blog_post.cta_desc","MakeTrades provides all the tools you need for a successful start"),e("postCtaBtn","blog_post.cta_button","Request demo"),e("relatedTitle","blog_post.related","Related articles"),e("postCopyright","footer.copyright","Â© 2026 MakeTrades. All rights reserved.");const a=document.getElementById("backBlogBtn");a&&(a.href=`/blog.html?lang=${g}`);const o=document.getElementById("errorBackBtn");o&&(o.href=`/blog.html?lang=${g}`)}async function T(e){var t;const a=g;g=e,document.documentElement.lang=e,document.querySelectorAll(".lang-btn").forEach(n=>n.classList.remove("active")),(t=document.querySelector(`[data-lang="${e}"]`))==null||t.classList.add("active");const o=new URL(window.location.href);o.searchParams.set("lang",e);let r=w();if(r){const n=r.replace(new RegExp(`-${a}$`),`-${e}`);o.searchParams.set("slug",n),r=n}window.history.replaceState({},"",o.toString()),_=await L(e),S(),C(),r&&x(r)}function $(e){document.title=e.meta_title||`${e.title} | MakeTrades`;const a=document.getElementById("page-description");a&&(a.content=e.meta_description||e.excerpt);const o=document.getElementById("page-keywords");o&&e.tags&&(o.content=e.tags.join(", "));const r=document.getElementById("page-canonical");r&&(r.href=`https://maketrades.info/blog-post.html?slug=${e.slug}`);const t=document.getElementById("og-title");t&&(t.content=e.title);const n=document.getElementById("og-description");n&&(n.content=e.excerpt);const s=document.getElementById("og-image");s&&(s.content=e.image_url||"https://maketrades.info/og-image.jpg");const m=document.getElementById("og-url");m&&(m.content=`https://maketrades.info/blog-post.html?slug=${e.slug}`);const l=document.getElementById("twitter-title");l&&(l.content=e.title);const d=document.getElementById("twitter-description");d&&(d.content=e.excerpt);const u=document.getElementById("twitter-image");u&&(u.content=e.image_url||"https://maketrades.info/twitter-image.jpg");const f={"@context":"https://schema.org","@type":"BlogPosting",headline:e.title,description:e.excerpt,image:e.image_url,author:{"@type":"Person",name:e.author},publisher:{"@type":"Organization",name:"MakeTrades",logo:{"@type":"ImageObject",url:"https://maketrades.info/logo.svg"}},datePublished:e.created_at,dateModified:e.updated_at,mainEntityOfPage:{"@type":"WebPage","@id":`https://maketrades.info/blog-post.html?slug=${e.slug}`}},y=document.getElementById("structured-data");y&&(y.textContent=JSON.stringify(f));const p={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"MakeTrades",item:"https://maketrades.info"},{"@type":"ListItem",position:2,name:"Blog",item:"https://maketrades.info/blog.html"},{"@type":"ListItem",position:3,name:e.title}]},i=document.getElementById("breadcrumb-data");i&&(i.textContent=JSON.stringify(p))}async function A(e){try{await b.rpc("increment_post_views",{post_id:e})}catch(a){console.error("Error incrementing views:",a)}}async function x(e){const a=document.getElementById("loading"),o=document.getElementById("error"),r=document.getElementById("post-content");a&&(a.style.display="block"),o&&(o.style.display="none"),r&&(r.style.display="none");try{const{data:t,error:n}=await b.from("blog_posts").select("*").eq("slug",e).eq("language",g).eq("published",!0).maybeSingle();if(n)throw n;if(!t){a&&(a.style.display="none"),o&&(o.style.display="block");return}$(t),A(t.id);const s=document.getElementById("post-title");s&&(s.textContent=t.title);const m=document.getElementById("post-excerpt");m&&(m.textContent=t.excerpt);const l=document.getElementById("post-category");l&&(l.textContent=t.category||"");const d=document.getElementById("post-date");d&&(d.textContent=new Date(t.created_at).toLocaleDateString(I(),{year:"numeric",month:"long",day:"numeric"}),d.setAttribute("datetime",t.created_at));const u=document.getElementById("post-reading-time");u&&(u.textContent=`${t.reading_time||5} ${c("blog_post.min_read","min read")}`);const f=document.getElementById("post-author");f&&(f.textContent=t.author);const y=document.getElementById("post-image");y&&(y.src=t.image_url||"https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=800",y.alt=t.title);const p=document.getElementById("post-text");p&&(p.innerHTML=t.content);const i=document.getElementById("post-tags");i&&t.tags&&t.tags.length>0&&(i.innerHTML=`<strong>${c("blog_post.tags","Tags:")}</strong> `+t.tags.map(h=>`<span class="tag">${h}</span>`).join("")),M(t.category,t.id),a&&(a.style.display="none"),r&&(r.style.display="block")}catch(t){console.error("Error loading blog post:",t),a&&(a.style.display="none"),o&&(o.style.display="block")}}async function M(e,a){const o=document.getElementById("related-posts-grid");if(o)try{const{data:r,error:t}=await b.from("blog_posts").select("*").eq("language",g).eq("published",!0).eq("hidden_from_users",!1).eq("category",e).neq("id",a).order("created_at",{ascending:!1}).limit(3);if(t)throw t;if(!r||r.length===0){const n=document.querySelector(".related-posts");n&&(n.style.display="none");return}o.innerHTML=r.map(n=>`
      <a href="/blog-post.html?slug=${n.slug}&lang=${g}" class="blog-card fade-in">
        <img src="${n.image_url||"https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=400"}"
             alt="${n.title}"
             class="blog-card-image"
             loading="lazy">
        <div class="blog-card-content">
          <h3>${n.title}</h3>
          <p>${n.excerpt}</p>
          <div class="blog-card-meta">
            <span>${n.author}</span>
            <span>&bull;</span>
            <time datetime="${n.created_at}">
              ${new Date(n.created_at).toLocaleDateString(I())}
            </time>
          </div>
        </div>
      </a>
    `).join("")}catch(r){console.error("Error loading related posts:",r)}}function D(e){e.classList.add("active"),e.setAttribute("aria-hidden","false")}function v(e){e.classList.remove("active"),e.setAttribute("aria-hidden","true")}function E(e,a){const o=e.closest(".form-field");if(!o)return;e.classList.add("input-error");const r=document.createElement("div");r.className="field-error",r.textContent=a,o.appendChild(r),requestAnimationFrame(()=>r.classList.add("visible"))}function P(e){var o;const a=e.closest(".form-field");a&&(e.classList.remove("input-error"),(o=a.querySelector(".field-error"))==null||o.remove())}function q(e,a,o){e.querySelectorAll(".form-message").forEach(n=>n.remove());const r=document.createElement("div");r.className=`form-message form-message--${o}`;const t=o==="success"?'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M6 10.5l2.5 2.5 5.5-5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>':'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M10 6v5M10 13.5v.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>';r.innerHTML=`${t}<span>${a}</span>`,e.appendChild(r),requestAnimationFrame(()=>r.classList.add("visible")),o==="success"?setTimeout(()=>{r.classList.remove("visible"),setTimeout(()=>{var n;r.remove(),(n=e.closest(".modal"))==null||n.classList.remove("active")},300)},3e3):setTimeout(()=>{r.classList.remove("visible"),setTimeout(()=>r.remove(),300)},5e3)}function R(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}async function j(e){var p;e.preventDefault();const a=e.target;a.querySelectorAll(".field-error").forEach(i=>i.remove()),a.querySelectorAll(".input-error").forEach(i=>i.classList.remove("input-error"));const o=a.querySelector('input[name="name"]'),r=a.querySelector('input[name="email"]'),t=a.querySelector('input[name="telegram"]'),n=a.querySelector('input[name="broker_experience"]:checked'),s=a.querySelector(".radio-group"),m=a.querySelector('input[name="not_robot"]'),l=m==null?void 0:m.closest(".checkbox-field"),d=(p=l==null?void 0:l.parentElement)==null?void 0:p.querySelector(".checkbox-error");let u=!1;if(o.value.trim()||(E(o,c("error.name_required","Please enter your name")),u=!0),r.value.trim()?R(r.value.trim())||(E(r,c("error.email_invalid","Please enter a valid email address")),u=!0):(E(r,c("error.email_required","Please enter your email")),u=!0),t.value.trim()||(E(t,c("error.telegram_required","Please enter your Telegram")),u=!0),n){const i=s==null?void 0:s.querySelector(".radio-error");i&&i.remove(),s==null||s.classList.remove("has-error")}else{if(!(s==null?void 0:s.querySelector(".radio-error"))){const h=document.createElement("div");h.className="radio-error",h.textContent=c("error.broker_experience_required","Please select an option"),s==null||s.appendChild(h),requestAnimationFrame(()=>h.classList.add("visible"))}s==null||s.classList.add("has-error"),u=!0}if(m&&!m.checked){if(!d){const i=document.createElement("div");i.className="checkbox-error",i.textContent=c("error.robot_check","Please confirm you are not a robot"),l==null||l.after(i),requestAnimationFrame(()=>i.classList.add("visible"))}l==null||l.classList.add("has-error"),u=!0}else d&&d.remove(),l==null||l.classList.remove("has-error");if(u)return;d&&d.remove(),l==null||l.classList.remove("has-error");const f=new FormData(a),y={name:f.get("name"),email:f.get("email"),telegram:f.get("telegram"),broker_experience:f.get("broker_experience")==="yes"};try{const{error:i}=await b.from("demo_requests").insert([y]);if(i)throw i;q(a,c("success.demo_submitted","Thank you! We will contact you shortly."),"success"),a.reset()}catch(i){console.error("Error submitting demo request:",i),q(a,c("error.submit_failed","An error occurred. Please try again later."),"error")}}function U(){const e=document.getElementById("demoModal"),a=document.getElementById("postCtaBtn");a==null||a.addEventListener("click",()=>{e&&D(e)}),document.querySelectorAll(".modal-close").forEach(t=>{t.addEventListener("click",()=>{const n=t.closest(".modal");n&&v(n)})}),document.querySelectorAll(".modal").forEach(t=>{t.addEventListener("click",n=>{n.target===t&&v(t)})}),document.addEventListener("keydown",t=>{t.key==="Escape"&&document.querySelectorAll(".modal.active").forEach(n=>{v(n)})});const o=document.getElementById("demoForm");o==null||o.addEventListener("submit",j),o==null||o.querySelectorAll("input").forEach(t=>{t.addEventListener("input",()=>P(t))});const r=o==null?void 0:o.querySelector('input[name="not_robot"]');r==null||r.addEventListener("change",()=>{var s;const t=r.closest(".checkbox-field"),n=(s=t==null?void 0:t.parentElement)==null?void 0:s.querySelector(".checkbox-error");r.checked&&(n==null||n.classList.remove("visible"),setTimeout(()=>n==null?void 0:n.remove(),200),t==null||t.classList.remove("has-error"))}),o==null||o.querySelectorAll('input[name="broker_experience"]').forEach(t=>{t.addEventListener("change",()=>{const n=t.closest(".radio-group"),s=n==null?void 0:n.querySelector(".radio-error");s&&(s.classList.remove("visible"),setTimeout(()=>s.remove(),200)),n==null||n.classList.remove("has-error")})})}function C(){const e=document.getElementById("demoForm");if(!e)return;((s,m,l)=>{const d=document.getElementById(s);d&&(d.textContent=c(m,l))})("demoModalTitle","modal.demo_title","Request Demo Account");const o=e.querySelector('input[name="name"]'),r=e.querySelector('input[name="email"]'),t=e.querySelector('input[name="telegram"]');o&&(o.placeholder=c("form.name","Your name")),r&&(r.placeholder=c("form.email","Email")),t&&(t.placeholder=c("form.telegram_required","Telegram")),e.querySelectorAll('[data-translate="form.broker_experience"]').forEach(s=>{s.textContent=c("form.broker_experience","Have you had experience working as a broker?")}),e.querySelectorAll('[data-translate="form.yes"]').forEach(s=>{s.textContent=c("form.yes","Yes")}),e.querySelectorAll('[data-translate="form.no"]').forEach(s=>{s.textContent=c("form.no","No")}),e.querySelectorAll('[data-translate="form.not_robot"]').forEach(s=>{s.textContent=c("form.not_robot","I am not a robot")});const n=e.querySelector('button[type="submit"]');n&&(n.textContent=c("form.request","Request"))}async function B(){var a;document.documentElement.lang=g,document.querySelectorAll(".lang-btn").forEach(o=>{o.classList.remove("active"),o.addEventListener("click",()=>{const r=o.getAttribute("data-lang");r&&T(r)})}),(a=document.querySelector(`[data-lang="${g}"]`))==null||a.classList.add("active"),_=await L(g),S(),C(),U();const e=w();if(e)x(e);else{const o=document.getElementById("error"),r=document.getElementById("loading");o&&(o.style.display="block"),r&&(r.style.display="none")}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",B):B();
