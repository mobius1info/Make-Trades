import{c as j}from"./index-D488pGsG.js";import{l as k,a as J}from"./content-loader-6e-CUeUh.js";const E="https://gknfzfxjaeuvrncgljyi.supabase.co",b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImdrbmZ6ZnhqYWV1dnJuY2dsanlpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA1NzMwNjEsImV4cCI6MjA4NjE0OTA2MX0.rZoKwEl9nbE4KLh3J5MZM5FfbdtCxOJGXTSTCe9VEds";let w;try{w=j(E,b)}catch(e){console.error("Supabase init failed:",e),w=null}const U=new URLSearchParams(window.location.search);let u=U.get("lang")||"ru",y={},X={};function f(e,t){typeof window.gtag=="function"&&window.gtag("event",e,t),typeof window.ym=="function"&&window.ym(parseInt("XXXXXXXX"),"reachGoal",e,t)}async function N(e){var r;u=e,document.documentElement.lang=e,document.querySelectorAll(".lang-btn").forEach(o=>{o.classList.remove("active")}),(r=document.querySelector(`[data-lang="${e}"]`))==null||r.classList.add("active");const t=new URL(window.location.href);t.searchParams.set("lang",e),window.history.replaceState({},"",t.toString()),f("language_changed",{language:e}),y=await k(e),await B(),M(),P()}function i(e,t){return y[e]||t}function h(e,t,r){const o=document.querySelector(e);o&&(o.textContent=i(t,r))}function g(e,t,r){const o=document.getElementById(e);o&&(o.textContent=i(t,r))}async function B(){h(".hero-title","hero.title","Best solution for creating a broker"),h(".hero-subtitle","hero.subtitle","Turnkey creation of brokers, crypto exchanges and dealing centers with MakeTrades"),h(".features-grid .section-title","section.features_title","Full functionality for your broker"),h(".blog-preview .section-title","section.blog_title","Useful articles"),h(".faq-section .section-title","section.faq_title","Frequently asked questions"),h(".cta-content h2","cta.title","Ready to start?"),h(".cta-content p","cta.description","Get a demo account and test all platform features for free"),document.querySelectorAll("#requestDemoBtn, #ctaRequestDemoBtn").forEach(l=>{l.textContent=i("button.request_demo","Request Demo Account")}),document.querySelectorAll(".feature-badge span").forEach((l,c)=>{const d=`hero.badge_${c+1}`;y[d]&&(l.textContent=y[d])}),g("loginBtnText","button.login","Personal Account"),g("priceFrom","pricing.from","From"),g("pricePeriod","pricing.period","per month"),g("allArticlesBtn","button.all_articles","All articles"),g("allFaqBtn","button.all_questions","All questions"),g("demoModalTitle","modal.demo_title","Request Demo Account"),g("copyrightText","footer.copyright","© 2026 MakeTrades. All rights reserved."),g("footerAddressLabel","footer.address","Address"),g("footerPhoneLabel","footer.phone","Phone"),g("footerEmailLabel","footer.email_label","Email"),document.querySelectorAll("[data-feature]").forEach(l=>{const c=l.getAttribute("data-feature"),d=l.querySelector("h3"),p=l.querySelector("p");d&&(d.textContent=i(`feature.${c}.title`,d.textContent||"")),p&&(p.textContent=i(`feature.${c}.desc`,p.textContent||""))}),document.querySelectorAll("[data-detail]").forEach(l=>{const c=l.getAttribute("data-detail"),d=l.querySelector("h2"),p=l.querySelector(".feature-detail-content > p");d&&(d.textContent=i(`detail${c}.title`,d.textContent||"")),p&&(p.textContent=i(`detail${c}.desc`,p.textContent||"")),l.querySelectorAll(".feature-list li").forEach((S,L)=>{const m=S.querySelector("span");m&&(m.textContent=i(`detail${c}.item${L+1}`,m.textContent||""))})}),document.querySelectorAll('[data-translate="form.not_robot"]').forEach(l=>{l.textContent=i("form.not_robot","I am not a robot")});const e=document.querySelector('#demoForm button[type="submit"]');e&&(e.textContent=i("form.request","Request"));const t=document.querySelector('#contactForm button[type="submit"]');t&&(t.textContent=i("form.submit","Submit"));const r=document.getElementById("demoForm");if(r){const l=r.querySelector('input[name="name"]'),c=r.querySelector('input[name="email"]'),d=r.querySelector('input[name="telegram"]');l&&(l.placeholder=i("form.name","Your name")),c&&(c.placeholder=i("form.email","Email")),d&&(d.placeholder=i("form.telegram","Telegram (optional)"))}g("loginModalTitle","login.title","Sign In");const o=document.getElementById("loginForm");if(o){const l=o.querySelector('input[name="email"]'),c=o.querySelector('input[name="password"]');l&&(l.placeholder=i("login.email","Email")),c&&(c.placeholder=i("login.password","Password"))}const s=document.getElementById("loginSubmitBtn");s&&(s.textContent=i("login.button","Log In"));const n=document.getElementById("allArticlesBtn");n&&(n.href=`/blog.html?lang=${u}`);const a=document.getElementById("allFaqBtn");a&&(a.href=`/faq.html?lang=${u}`)}async function M(e=3){const t=document.getElementById("blogGrid");if(t)try{const{data:r,error:o}=await w.from("blog_posts").select("*").eq("language",u).eq("published",!0).order("created_at",{ascending:!1}).limit(e);if(o)throw o;if(!r||r.length===0){t.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${i("blog.empty","Articles coming soon")}</p>`;return}t.innerHTML=r.map(s=>`
      <a href="/blog-post.html?slug=${s.slug}&lang=${u}" class="blog-card fade-in">
        <img src="${s.image_url||"https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=400"}"
             alt="${s.title}"
             class="blog-card-image"
             loading="lazy">
        <div class="blog-card-content">
          <h3>${s.title}</h3>
          <p>${s.excerpt}</p>
          <div class="blog-card-meta">
            <span>${s.author}</span>
            <span>•</span>
            <span>${new Date(s.created_at).toLocaleDateString(u==="ru"?"ru-RU":u==="en"?"en-US":u==="de"?"de-DE":u==="uk"?"uk-UA":u==="zh"?"zh-CN":"en-US")}</span>
          </div>
        </div>
      </a>
    `).join("")}catch(r){console.error("Error loading blog posts:",r),t.innerHTML=`<p style="text-align: center; color: var(--error-500);">${i("blog.error","Error loading articles")}</p>`}}async function P(e=4){const t=document.getElementById("faqList");if(t)try{const{data:r,error:o}=await w.from("faq_items").select("*").eq("language",u).order("order",{ascending:!0}).limit(e);if(o)throw o;if(!r||r.length===0){t.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${i("faq.empty","FAQ coming soon")}</p>`;return}t.innerHTML=r.map(s=>`
      <div class="faq-item fade-in" data-faq-id="${s.id}">
        <div class="faq-question">
          <span>${s.question}</span>
          <span>+</span>
        </div>
        <div class="faq-answer">${s.answer}</div>
      </div>
    `).join(""),document.querySelectorAll(".faq-item").forEach(s=>{s.addEventListener("click",()=>{const n=s.classList.contains("active");if(s.classList.toggle("active"),!n){const a=s.getAttribute("data-faq-id");f("faq_item_opened",{faq_id:a,language:u})}})})}catch(r){console.error("Error loading FAQ items:",r),t.innerHTML=`<p style="text-align: center; color: var(--error-500);">${i("faq.error","Error loading FAQ")}</p>`}}function _(e){e.classList.add("active"),e.setAttribute("aria-hidden","false")}function A(e){e.classList.remove("active"),e.setAttribute("aria-hidden","true")}function z(){const e=document.getElementById("demoModal"),t=document.getElementById("loginModal"),r=document.getElementById("requestDemoBtn"),o=document.getElementById("ctaRequestDemoBtn"),s=document.querySelector('a[href="#login"]');r==null||r.addEventListener("click",()=>{e&&(_(e),f("demo_modal_opened",{language:u}))}),o==null||o.addEventListener("click",()=>{e&&(_(e),f("demo_modal_opened",{language:u}))}),s==null||s.addEventListener("click",n=>{n.preventDefault(),t&&(_(t),f("login_modal_opened",{language:u}))}),document.querySelectorAll(".modal-close").forEach(n=>{n.addEventListener("click",()=>{const a=n.closest(".modal");a&&A(a)})}),document.querySelectorAll(".modal").forEach(n=>{n.addEventListener("click",a=>{a.target===n&&A(n)})}),document.addEventListener("keydown",n=>{n.key==="Escape"&&document.querySelectorAll(".modal.active").forEach(a=>{A(a)})})}function q(e,t,r){e.querySelectorAll(".form-message").forEach(n=>n.remove());const o=document.createElement("div");o.className=`form-message form-message--${r}`;const s=r==="success"?'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M6 10.5l2.5 2.5 5.5-5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>':'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M10 6v5M10 13.5v.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>';o.innerHTML=`${s}<span>${t}</span>`,e.appendChild(o),requestAnimationFrame(()=>o.classList.add("visible")),r==="success"?setTimeout(()=>{o.classList.remove("visible"),setTimeout(()=>{var n;o.remove(),(n=e.closest(".modal"))==null||n.classList.remove("active")},300)},3e3):setTimeout(()=>{o.classList.remove("visible"),setTimeout(()=>o.remove(),300)},5e3)}function v(e,t){const r=e.closest(".form-field");if(!r)return;I(e),e.classList.add("input-error");const o=document.createElement("div");o.className="field-error",o.textContent=t,r.appendChild(o),requestAnimationFrame(()=>o.classList.add("visible"))}function I(e){var r;const t=e.closest(".form-field");t&&(e.classList.remove("input-error"),(r=t.querySelector(".field-error"))==null||r.remove())}function F(e){e.querySelectorAll(".field-error").forEach(t=>t.remove()),e.querySelectorAll(".input-error").forEach(t=>t.classList.remove("input-error"))}function D(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}async function H(e){e.preventDefault();const t=e.target;F(t),t.querySelectorAll(".form-message").forEach(l=>l.remove());const r=t.querySelector('input[name="email"]'),o=t.querySelector('input[name="password"]');let s=!1;if(r.value.trim()?D(r.value.trim())||(v(r,i("error.login_email_invalid","Please enter a valid email address")),s=!0):(v(r,i("error.login_email_required","Please enter your email")),s=!0),o.value||(v(o,i("error.login_password_required","Please enter your password")),s=!0),s)return;const n=t.querySelector('button[type="submit"]'),a=n.textContent;n.disabled=!0,n.textContent="...";try{const{error:l}=await w.auth.signInWithPassword({email:r.value.trim(),password:o.value});if(l){q(t,i("error.login_invalid","Invalid email or password"),"error"),f("login_failed",{language:u});return}f("login_success",{language:u});const c=document.getElementById("loginModal");c&&A(c),t.reset(),window.location.href=`/admin.html?lang=${u}`}catch{q(t,i("error.login_invalid","Invalid email or password"),"error")}finally{n.disabled=!1,n.textContent=a}}async function R(e){var L;e.preventDefault();const t=e.target;F(t);const r=t.querySelector('input[name="name"]'),o=t.querySelector('input[name="email"]'),s=t.querySelector('input[name="not_robot"]'),n=s==null?void 0:s.closest(".checkbox-field"),a=(L=n==null?void 0:n.parentElement)==null?void 0:L.querySelector(".checkbox-error");let l=!1;if(r.value.trim()||(v(r,i("error.name_required","Please enter your name")),l=!0),o.value.trim()?D(o.value.trim())||(v(o,i("error.email_invalid","Please enter a valid email address")),l=!0):(v(o,i("error.email_required","Please enter your email")),l=!0),s&&!s.checked){if(!a){const m=document.createElement("div");m.className="checkbox-error",m.textContent=i("error.robot_check","Please confirm you are not a robot"),n==null||n.after(m),requestAnimationFrame(()=>m.classList.add("visible"))}n==null||n.classList.add("has-error"),l=!0}else a&&a.remove(),n==null||n.classList.remove("has-error");if(l)return;a&&a.remove(),n==null||n.classList.remove("has-error");const c=new FormData(t),d={name:c.get("name"),email:c.get("email"),telegram:c.get("telegram")||null},p=`${E}/rest/v1/demo_requests`,S={"Content-Type":"application/json",apikey:b,Authorization:`Bearer ${b}`,Prefer:"return=minimal"};try{const m=await fetch(p,{method:"POST",headers:S,body:JSON.stringify(d)});if(!m.ok){const x=await m.json().catch(()=>({message:m.statusText}));throw new Error(x.message||x.error||`HTTP ${m.status}`)}fetch(`${E}/rest/v1/leads`,{method:"POST",headers:S,body:JSON.stringify({name:d.name,email:d.email,telegram:d.telegram,source:"demo",language:u})}).catch(()=>{}),f("demo_request_submitted",{language:u,has_telegram:!!d.telegram});const O=y["success.demo_submitted"]||"Thank you! We will contact you shortly.";q(t,O,"success"),t.reset()}catch(m){console.error("Error submitting demo request:",m),q(t,`Error: ${(m==null?void 0:m.message)||"Unknown error"}`,"error")}}async function Z(e){e.preventDefault();const t=e.target,r=new FormData(t),o={name:r.get("name"),email:r.get("email"),message:r.get("message"),telegram:r.get("telegram")||null},s=`${E}/rest/v1/contact_submissions`,n={"Content-Type":"application/json",apikey:b,Authorization:`Bearer ${b}`,Prefer:"return=minimal"};try{const a=await fetch(s,{method:"POST",headers:n,body:JSON.stringify(o)});if(!a.ok){const c=await a.json().catch(()=>({message:a.statusText}));throw new Error(c.message||c.error||`HTTP ${a.status}`)}fetch(`${E}/rest/v1/leads`,{method:"POST",headers:n,body:JSON.stringify({name:o.name,email:o.email,telegram:o.telegram,message:o.message,source:"contact",language:u})}).catch(()=>{}),f("contact_form_submitted",{language:u,has_telegram:!!o.telegram});const l=y["success.contact_submitted"]||"Thank you for your message! We will contact you shortly.";q(t,l,"success"),t.reset()}catch(a){console.error("Error submitting contact form:",a),q(t,`Error: ${(a==null?void 0:a.message)||"Unknown error"}`,"error")}}function G(){document.querySelectorAll(".lang-btn").forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-lang");t&&N(t)})})}async function C(){var n;document.documentElement.lang=u,document.querySelectorAll(".lang-btn").forEach(a=>a.classList.remove("active")),(n=document.querySelector(`[data-lang="${u}"]`))==null||n.classList.add("active"),G(),z();const e=document.getElementById("demoForm"),t=document.getElementById("contactForm");e==null||e.addEventListener("submit",R),t==null||t.addEventListener("submit",Z),[e,t].forEach(a=>{a==null||a.querySelectorAll("input, textarea").forEach(l=>{l.addEventListener("input",()=>I(l))})});const r=e==null?void 0:e.querySelector('input[name="not_robot"]');r==null||r.addEventListener("change",()=>{var c;const a=r.closest(".checkbox-field"),l=(c=a==null?void 0:a.parentElement)==null?void 0:c.querySelector(".checkbox-error");r.checked&&(l==null||l.classList.remove("visible"),setTimeout(()=>l==null?void 0:l.remove(),200),a==null||a.classList.remove("has-error"))});const o=document.querySelector("#telegram-button a");o==null||o.addEventListener("click",()=>{f("telegram_button_clicked",{language:u})});const s=document.getElementById("loginForm");s==null||s.addEventListener("submit",H),s==null||s.querySelectorAll("input").forEach(a=>{a.addEventListener("input",()=>I(a))});try{y=await k(u),X=await J(),await B(),M(),P()}catch(a){console.error("Failed to load content:",a)}}function $(){const e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),e.unobserve(r.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".reveal, .reveal-left, .reveal-right").forEach(t=>{e.observe(t)})}function T(){const e=document.querySelector(".header");if(!e)return;let t=!1;window.addEventListener("scroll",()=>{t||(requestAnimationFrame(()=>{window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled"),t=!1}),t=!0)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{C(),$(),T()}):(C(),$(),T());
