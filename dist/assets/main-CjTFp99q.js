import{s as x,a as T,b as $}from"./supabase-Oy0nagOi.js";import{l as N,a as Z}from"./content-loader-xWymZvdG.js";const G=new URLSearchParams(window.location.search);let m=G.get("lang")||"ru",p={},ee={},B=0,te=Date.now(),X=0,C={mouseMoved:!1,scrolled:!1,clicked:!1};function b(t,e){typeof window.gtag=="function"&&window.gtag("event",t,e),typeof window.ym=="function"&&window.ym(parseInt("XXXXXXXX"),"reachGoal",t,e)}async function re(t){var r;m=t,document.documentElement.lang=t,document.querySelectorAll(".lang-btn").forEach(o=>{o.classList.remove("active")}),(r=document.querySelector(`[data-lang="${t}"]`))==null||r.classList.add("active");const e=new URL(window.location.href);e.searchParams.set("lang",t),window.history.replaceState({},"",e.toString()),b("language_changed",{language:t}),p=await N(t),await j(),W(),Y()}function c(t,e){return p[t]||e}function w(t,e,r){const o=document.querySelector(t);o&&(o.textContent=c(e,r))}function v(t,e,r){const o=document.getElementById(t);o&&(o.textContent=c(e,r))}async function j(){w(".hero-title","hero.title","Best solution for creating a broker"),w(".hero-subtitle","hero.subtitle","Turnkey creation of brokers, crypto exchanges and dealing centers with MakeTrades"),w(".features-grid .section-title","section.features_title","Full functionality for your broker"),w(".blog-preview .section-title","section.blog_title","Useful articles"),w(".faq-section .section-title","section.faq_title","Frequently asked questions"),w(".cta-content h2","cta.title","Ready to start?"),w(".cta-content p","cta.description","Get a demo account and test all platform features for free"),document.querySelectorAll("#requestDemoBtn, #ctaRequestDemoBtn").forEach(a=>{a.textContent=c("button.request_demo","Request Demo Account")}),document.querySelectorAll(".feature-badge span").forEach((a,s)=>{const d=`hero.badge_${s+1}`;p[d]&&(a.textContent=p[d])}),v("loginBtnText","button.login","Personal Account"),v("priceFrom","pricing.from","From"),v("pricePeriod","pricing.period","per month"),v("allArticlesBtn","button.all_articles","All articles"),v("allFaqBtn","button.all_questions","All questions"),v("demoModalTitle","modal.demo_title","Request Demo Account"),v("copyrightText","footer.copyright","© 2026 MakeTrades. All rights reserved."),v("footerAddressLabel","footer.address","Address"),v("footerPhoneLabel","footer.phone","Phone"),v("footerEmailLabel","footer.email_label","Email"),document.querySelectorAll("[data-feature]").forEach(a=>{const s=a.getAttribute("data-feature"),d=a.querySelector("h3"),g=a.querySelector("p");d&&(d.textContent=c(`feature.${s}.title`,d.textContent||"")),g&&(g.textContent=c(`feature.${s}.desc`,g.textContent||""))}),document.querySelectorAll("[data-detail]").forEach(a=>{const s=a.getAttribute("data-detail"),d=a.querySelector("h2"),g=a.querySelector(".feature-detail-content > p");d&&(d.textContent=c(`detail${s}.title`,d.textContent||"")),g&&(g.textContent=c(`detail${s}.desc`,g.textContent||"")),a.querySelectorAll(".feature-list li").forEach((q,M)=>{const E=q.querySelector("span");E&&(E.textContent=c(`detail${s}.item${M+1}`,E.textContent||""))})});const t=document.querySelector('#demoForm button[type="submit"]');t&&(t.textContent=c("form.request","Request"));const e=document.querySelector('#contactForm button[type="submit"]');e&&(e.textContent=c("form.submit","Submit"));const r=document.getElementById("demoForm");if(r){const a=r.querySelector('input[name="name"]'),s=r.querySelector('input[name="email"]'),d=r.querySelector('input[name="telegram"]');a&&(a.placeholder=c("form.name","Your name")),s&&(s.placeholder=c("form.email","Email")),d&&(d.placeholder=c("form.telegram_required","Telegram"))}const o=new Set(["form.promo_text"]);document.querySelectorAll("[data-translate]").forEach(a=>{const s=a.getAttribute("data-translate");s&&p[s]&&(o.has(s)?a.innerHTML=p[s]:a.textContent=p[s])}),document.querySelectorAll('[data-translate="form.broker_experience"]').forEach(a=>{a.textContent=c("form.broker_experience","Have you had experience working as a broker?")}),document.querySelectorAll('[data-translate="form.yes"]').forEach(a=>{a.textContent=c("form.yes","Yes")}),document.querySelectorAll('[data-translate="form.no"]').forEach(a=>{a.textContent=c("form.no","No")}),v("loginModalTitle","login.title","Sign In");const n=document.getElementById("loginForm");if(n){const a=n.querySelector('input[name="email"]'),s=n.querySelector('input[name="password"]');a&&(a.placeholder=c("login.email","Email")),s&&(s.placeholder=c("login.password","Password"))}const u=document.getElementById("loginSubmitBtn");u&&(u.textContent=c("login.button","Log In"));const l=document.getElementById("allArticlesBtn");l&&(l.href=`/blog.html?lang=${m}`);const i=document.getElementById("allFaqBtn");i&&(i.href=`/faq.html?lang=${m}`)}async function W(t=3){const e=document.getElementById("blogGrid");if(e)try{const{data:r,error:o}=await x.from("blog_posts").select("*").eq("language",m).eq("published",!0).order("created_at",{ascending:!1}).limit(t);if(o)throw o;if(!r||r.length===0){e.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${c("blog.empty","Articles coming soon")}</p>`;return}e.innerHTML=r.map(n=>`
      <a href="/blog-post.html?slug=${n.slug}&lang=${m}" class="blog-card fade-in">
        <img src="${n.image_url||"https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=400"}"
             alt="${n.title}"
             class="blog-card-image"
             loading="lazy">
        <div class="blog-card-content">
          <h3>${n.title}</h3>
          <p>${n.excerpt}</p>
          <div class="blog-card-meta">
            <span>${n.author}</span>
            <span>•</span>
            <span>${new Date(n.created_at).toLocaleDateString(m==="ru"?"ru-RU":m==="en"?"en-US":m==="de"?"de-DE":m==="uk"?"uk-UA":m==="zh"?"zh-CN":"en-US")}</span>
          </div>
        </div>
      </a>
    `).join("")}catch(r){console.error("Error loading blog posts:",r),e.innerHTML=`<p style="text-align: center; color: var(--error-500);">${c("blog.error","Error loading articles")}</p>`}}async function Y(t=4){const e=document.getElementById("faqList");if(e)try{const{data:r,error:o}=await x.from("faq_items").select("*").eq("language",m).order("order",{ascending:!0}).limit(t);if(o)throw o;if(!r||r.length===0){e.innerHTML=`<p style="text-align: center; color: var(--neutral-500);">${c("faq.empty","FAQ coming soon")}</p>`;return}e.innerHTML=r.map(n=>`
      <div class="faq-item fade-in" data-faq-id="${n.id}">
        <div class="faq-question">
          <span>${n.question}</span>
          <span>+</span>
        </div>
        <div class="faq-answer">${n.answer}</div>
      </div>
    `).join(""),document.querySelectorAll(".faq-item").forEach(n=>{n.addEventListener("click",()=>{const u=n.classList.contains("active");if(n.classList.toggle("active"),!u){const l=n.getAttribute("data-faq-id");b("faq_item_opened",{faq_id:l,language:m})}})})}catch(r){console.error("Error loading FAQ items:",r),e.innerHTML=`<p style="text-align: center; color: var(--error-500);">${c("faq.error","Error loading FAQ")}</p>`}}function I(t){t.classList.add("active"),t.setAttribute("aria-hidden","false")}function A(t){t.classList.remove("active"),t.setAttribute("aria-hidden","true")}function oe(){const t=document.getElementById("demoModal"),e=document.getElementById("loginModal"),r=document.getElementById("requestDemoBtn"),o=document.getElementById("ctaRequestDemoBtn"),n=document.querySelector('a[href="#login"]');r==null||r.addEventListener("click",()=>{t&&(B=Date.now(),P(),I(t),b("demo_modal_opened",{language:m}))}),o==null||o.addEventListener("click",()=>{t&&(B=Date.now(),P(),I(t),b("demo_modal_opened",{language:m}))}),n==null||n.addEventListener("click",u=>{u.preventDefault(),e&&(I(e),b("login_modal_opened",{language:m}))}),document.querySelectorAll(".modal-close").forEach(u=>{u.addEventListener("click",()=>{const l=u.closest(".modal");l&&A(l)})}),document.querySelectorAll(".modal").forEach(u=>{u.addEventListener("click",l=>{l.target===u&&A(u)})}),document.addEventListener("keydown",u=>{u.key==="Escape"&&document.querySelectorAll(".modal.active").forEach(l=>{A(l)})})}function h(t,e,r){t.querySelectorAll(".form-message").forEach(u=>u.remove());const o=document.createElement("div");o.className=`form-message form-message--${r}`;const n=r==="success"?'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M6 10.5l2.5 2.5 5.5-5.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>':'<svg width="20" height="20" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="10" r="10" fill="currentColor" opacity="0.15"/><path d="M10 6v5M10 13.5v.5" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>';o.innerHTML=`${n}<span>${e}</span>`,t.appendChild(o),requestAnimationFrame(()=>o.classList.add("visible")),r==="success"?setTimeout(()=>{o.classList.remove("visible"),setTimeout(()=>{var u;o.remove(),(u=t.closest(".modal"))==null||u.classList.remove("active")},300)},3e3):setTimeout(()=>{o.classList.remove("visible"),setTimeout(()=>o.remove(),300)},5e3)}function L(t,e){const r=t.closest(".form-field");if(!r)return;F(t),t.classList.add("input-error");const o=document.createElement("div");o.className="field-error",o.textContent=e,r.appendChild(o),requestAnimationFrame(()=>o.classList.add("visible"))}function F(t){var r;const e=t.closest(".form-field");e&&(t.classList.remove("input-error"),(r=e.querySelector(".field-error"))==null||r.remove())}function z(t){t.querySelectorAll(".field-error").forEach(e=>e.remove()),t.querySelectorAll(".input-error").forEach(e=>e.classList.remove("input-error"))}function Q(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}function P(){const t=[()=>{const o=2+Math.floor(Math.random()*18),n=1+Math.floor(Math.random()*o);return{q:`${o} − ${n}`,a:o-n}},()=>{const o=1+Math.floor(Math.random()*12),n=1+Math.floor(Math.random()*12);return{q:`${o} + ${n}`,a:o+n}},()=>{const o=2+Math.floor(Math.random()*9),n=2+Math.floor(Math.random()*5);return{q:`${o} × ${n}`,a:o*n}}],e=t[Math.floor(Math.random()*t.length)]();X=e.a;const r=document.getElementById("captchaQuestion");r&&(r.textContent=e.q+" =")}async function ne(t){t.preventDefault();const e=t.target;z(e),e.querySelectorAll(".form-message").forEach(i=>i.remove());const r=e.querySelector('input[name="email"]'),o=e.querySelector('input[name="password"]');let n=!1;if(r.value.trim()?Q(r.value.trim())||(L(r,c("error.login_email_invalid","Please enter a valid email address")),n=!0):(L(r,c("error.login_email_required","Please enter your email")),n=!0),o.value||(L(o,c("error.login_password_required","Please enter your password")),n=!0),n)return;const u=e.querySelector('button[type="submit"]'),l=u.textContent;u.disabled=!0,u.textContent="...";try{const{data:i,error:a}=await x.auth.signInWithPassword({email:r.value.trim(),password:o.value});if(a){h(e,c("error.login_invalid","Invalid email or password"),"error"),b("login_failed",{language:m});return}const{data:s}=await x.from("admin_users").select("id").eq("id",i.user.id).maybeSingle();if(s){await x.auth.signOut(),h(e,c("error.login_invalid","Invalid email or password"),"error");return}b("login_success",{language:m});const d=document.getElementById("loginModal");d&&A(d),e.reset(),h(e,c("login.success","You have successfully logged in"),"success")}catch{h(e,c("error.login_invalid","Invalid email or password"),"error")}finally{u.disabled=!1,u.textContent=l}}function ae(t){t&&(t.querySelectorAll(".custom-select").forEach(e=>{var l;const r=e.querySelector(".custom-select-trigger"),o=e.querySelectorAll(".custom-select-option"),n=(l=e.closest(".custom-select-group"))==null?void 0:l.querySelector('input[type="hidden"]'),u=e.querySelector(".custom-select-value");r.addEventListener("click",i=>{i.stopPropagation();const a=e.classList.contains("open");document.querySelectorAll(".custom-select.open").forEach(s=>s.classList.remove("open")),a||e.classList.add("open")}),o.forEach(i=>{i.addEventListener("click",a=>{a.stopPropagation(),o.forEach(g=>g.classList.remove("active")),i.classList.add("active"),n&&(n.value=i.dataset.value||""),u.textContent=i.textContent||"",e.classList.add("selected"),e.classList.remove("open","has-error");const s=e.closest(".custom-select-group"),d=s==null?void 0:s.querySelector(".select-error");d&&(d.classList.remove("visible"),setTimeout(()=>d.remove(),200))})}),e.addEventListener("keydown",i=>{i.key==="Enter"||i.key===" "?(i.preventDefault(),r.click()):i.key==="Escape"&&e.classList.remove("open")})}),document.addEventListener("click",()=>{document.querySelectorAll(".custom-select.open").forEach(e=>e.classList.remove("open"))}))}function se(t){t.querySelectorAll(".custom-select").forEach(e=>{e.classList.remove("selected","open","has-error");const r=e.querySelector(".custom-select-value"),o=r==null?void 0:r.getAttribute("data-translate");r&&o&&(r.textContent=p[o]||r.textContent),e.querySelectorAll(".custom-select-option.active").forEach(n=>n.classList.remove("active"))}),t.querySelectorAll('.custom-select-group input[type="hidden"]').forEach(e=>{e.value=""})}async function le(t){t.preventDefault();const e=t.target;z(e);const r=e.querySelector('input[name="name"]'),o=e.querySelector('input[name="email"]'),n=e.querySelector('input[name="telegram"]'),u=e.querySelector('input[name="referral_source"]'),l=e.querySelector(".custom-select"),i=e.querySelector(".custom-select-group"),a=e.querySelector('input[name="broker_experience"]:checked'),s=e.querySelector(".radio-group"),d=e.querySelector("#captchaAnswer"),g=e.querySelector("#captchaField");let q=!1;if(r.value.trim()||(L(r,c("error.name_required","Please enter your name")),q=!0),o.value.trim()?Q(o.value.trim())||(L(o,c("error.email_invalid","Please enter a valid email address")),q=!0):(L(o,c("error.email_required","Please enter your email")),q=!0),n.value.trim()||(L(n,c("error.telegram_required","Please enter your Telegram")),q=!0),u.value){const f=i==null?void 0:i.querySelector(".select-error");f&&f.remove(),l==null||l.classList.remove("has-error")}else{if(!(i==null?void 0:i.querySelector(".select-error"))){const y=document.createElement("div");y.className="select-error",y.textContent=c("error.referral_required","Please select how you heard about us"),i==null||i.appendChild(y),requestAnimationFrame(()=>y.classList.add("visible"))}l==null||l.classList.add("has-error"),q=!0}if(a){const f=s==null?void 0:s.querySelector(".radio-error");f&&f.remove(),s==null||s.classList.remove("has-error")}else{if(!(s==null?void 0:s.querySelector(".radio-error"))){const y=document.createElement("div");y.className="radio-error",y.textContent=c("error.broker_experience_required","Please select an option"),s==null||s.appendChild(y),requestAnimationFrame(()=>y.classList.add("visible"))}s==null||s.classList.add("has-error"),q=!0}if(d&&g){const f=parseInt(d.value.trim(),10),y=g.querySelector(".captcha-error");if(isNaN(f)||f!==X){if(!y){const _=document.createElement("div");_.className="captcha-error",_.textContent=c("error.captcha_wrong","Wrong answer, try again"),g.appendChild(_),requestAnimationFrame(()=>_.classList.add("visible"))}g.classList.add("has-error"),P(),d.value="",q=!0}else y&&y.remove(),g.classList.remove("has-error")}if(q)return;const M=e.querySelector('input[name="website"]');if(M&&M.value){const f=p["success.demo_submitted"]||"Thank you! We will contact you shortly.";h(e,f,"success"),e.reset();return}if(B&&Date.now()-B<3e3){const f=p["success.demo_submitted"]||"Thank you! We will contact you shortly.";h(e,f,"success"),e.reset();return}const E=new FormData(e),S={name:E.get("name"),email:E.get("email"),telegram:E.get("telegram"),broker_experience:E.get("broker_experience")==="yes",referral_source:E.get("referral_source")},k=e.querySelector('button[type="submit"]'),J=k.textContent;k.disabled=!0,k.textContent="...";const D=`${T}/rest/v1/demo_requests`,O={"Content-Type":"application/json",apikey:$,Authorization:`Bearer ${$}`,Prefer:"return=minimal"};try{const{data:f}=await x.rpc("check_recent_submission",{p_email:S.email,p_telegram:S.telegram});if(f!=null&&f.is_duplicate){h(e,c("error.duplicate_submission","You have already submitted a request. Please wait 24 hours before submitting again."),"error");return}const y=await fetch(D,{method:"POST",headers:O,body:JSON.stringify(S)});if(!y.ok){const K=await y.text().catch(()=>"");throw new Error(`${y.status} ${y.statusText}: ${K} [URL: ${D}]`)}fetch(`${T}/rest/v1/leads`,{method:"POST",headers:O,body:JSON.stringify({name:S.name,email:S.email,telegram:S.telegram,broker_experience:S.broker_experience,referral_source:S.referral_source,source:"demo",language:m})}).catch(()=>{}),b("demo_request_submitted",{language:m,broker_experience:S.broker_experience});const _=p["success.demo_submitted"]||"Thank you! We will contact you shortly.";h(e,_,"success"),e.reset(),se(e)}catch(f){console.error("Error submitting demo request:",f),h(e,`Error: ${(f==null?void 0:f.message)||"Unknown error"}`,"error")}finally{k.disabled=!1,k.textContent=J}}async function ie(t){t.preventDefault();const e=t.target,r=new FormData(e),o={name:r.get("name"),email:r.get("email"),message:r.get("message"),telegram:r.get("telegram")||null},n=e.querySelector('button[type="submit"]'),u=n.textContent;n.disabled=!0,n.textContent="...";const l=`${T}/rest/v1/contact_submissions`,i={"Content-Type":"application/json",apikey:$,Authorization:`Bearer ${$}`,Prefer:"return=minimal"};try{const{data:a}=await x.rpc("check_recent_submission",{p_email:o.email,p_telegram:o.telegram});if(a!=null&&a.is_duplicate){h(e,c("error.duplicate_submission","You have already submitted a request. Please wait 24 hours before submitting again."),"error");return}const s=await fetch(l,{method:"POST",headers:i,body:JSON.stringify(o)});if(!s.ok){const g=await s.json().catch(()=>({message:s.statusText}));throw new Error(g.message||g.error||`HTTP ${s.status}`)}fetch(`${T}/rest/v1/leads`,{method:"POST",headers:i,body:JSON.stringify({name:o.name,email:o.email,telegram:o.telegram,message:o.message,source:"contact",language:m})}).catch(()=>{}),b("contact_form_submitted",{language:m,has_telegram:!!o.telegram});const d=p["success.contact_submitted"]||"Thank you for your message! We will contact you shortly.";h(e,d,"success"),e.reset()}catch(a){console.error("Error submitting contact form:",a),h(e,`Error: ${(a==null?void 0:a.message)||"Unknown error"}`,"error")}finally{n.disabled=!1,n.textContent=u}}function ce(){document.querySelectorAll(".lang-btn").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-lang");e&&re(e)})})}function ue(){const t=Date.now()-te,e=C.mouseMoved||C.scrolled;t<2e3||!e?de():V()}function V(){const t=document.querySelector("#telegram-button a"),e=t==null?void 0:t.getAttribute("data-telegram-link");e&&(b("telegram_button_clicked",{language:m,verified:!0}),window.open(e,"_blank","noopener,noreferrer"))}function de(){const t=document.getElementById("verifyModal"),e=document.getElementById("confirmVerify"),r=document.getElementById("verifyTimer");if(!t||!e||!r)return;let o=3;r.textContent=o.toString(),e.setAttribute("disabled","true");const n=setInterval(()=>{o--,r.textContent=o.toString(),o<=0&&(clearInterval(n),e.removeAttribute("disabled"),r.parentElement.textContent=c("button.confirm","Подтвердить"))},1e3);I(t)}function me(){const t=document.getElementById("verifyModal"),e=document.getElementById("confirmVerify"),r=document.getElementById("cancelVerify");e==null||e.addEventListener("click",()=>{t&&A(t),V()}),r==null||r.addEventListener("click",()=>{t&&A(t)})}function fe(){let t;document.addEventListener("mousemove",()=>{clearTimeout(t),t=window.setTimeout(()=>{C.mouseMoved=!0},100)},{once:!0}),document.addEventListener("scroll",()=>{C.scrolled=!0},{once:!0}),document.addEventListener("click",()=>{C.clicked=!0},{once:!0})}async function R(){var u;document.documentElement.lang=m,document.querySelectorAll(".lang-btn").forEach(l=>l.classList.remove("active")),(u=document.querySelector(`[data-lang="${m}"]`))==null||u.classList.add("active"),fe(),ce(),oe();const t=document.getElementById("demoForm"),e=document.getElementById("contactForm");t==null||t.addEventListener("submit",le),e==null||e.addEventListener("submit",ie),[t,e].forEach(l=>{l==null||l.querySelectorAll("input, textarea").forEach(i=>{i.addEventListener("input",()=>F(i))})});const r=t==null?void 0:t.querySelector("#captchaAnswer");r==null||r.addEventListener("input",()=>{const l=document.getElementById("captchaField"),i=l==null?void 0:l.querySelector(".captcha-error");i&&(i.classList.remove("visible"),setTimeout(()=>i.remove(),200)),l==null||l.classList.remove("has-error")}),P(),ae(t),t==null||t.querySelectorAll('input[name="broker_experience"]').forEach(l=>{l.addEventListener("change",()=>{const i=l.closest(".radio-group"),a=i==null?void 0:i.querySelector(".radio-error");a&&(a.classList.remove("visible"),setTimeout(()=>a.remove(),200)),i==null||i.classList.remove("has-error")})});const o=document.querySelector("#telegram-button a");o==null||o.addEventListener("click",l=>{l.preventDefault(),ue()}),me();const n=document.getElementById("loginForm");n==null||n.addEventListener("submit",ne),n==null||n.querySelectorAll("input").forEach(l=>{l.addEventListener("input",()=>F(l))});try{p=await N(m),ee=await Z(),await j(),W(),Y()}catch(l){console.error("Failed to load content:",l)}}function U(){const t=new IntersectionObserver(e=>{e.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),t.unobserve(r.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});document.querySelectorAll(".reveal, .reveal-left, .reveal-right").forEach(e=>{t.observe(e)})}function H(){const t=document.querySelector(".header");if(!t)return;let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{window.scrollY>50?t.classList.add("scrolled"):t.classList.remove("scrolled"),e=!1}),e=!0)})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{R(),U(),H()}):(R(),U(),H());
