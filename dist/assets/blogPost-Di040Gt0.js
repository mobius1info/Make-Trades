import{b as B,s as S,a as k}from"./supabase-DHWaaCdK.js";import{l as x}from"./content-loader-CSxsALxx.js";const w=new URLSearchParams(window.location.search);let u=w.get("lang")||"ru",q={};function i(e,n){return q[e]||n}function C(){return{ru:"ru-RU",en:"en-US",de:"de-DE",uk:"uk-UA",zh:"zh-CN"}[u]||"en-US"}function T(){return w.get("slug")}function $(){const e=(a,o,t)=>{const s=document.getElementById(a);s&&(s.textContent=i(o,t))};e("loadingText","blog_post.loading","Loading article..."),e("errorTitle","blog_post.not_found_title","Article not found"),e("errorDesc","blog_post.not_found_desc","Unfortunately, the requested article was not found."),e("errorBackBtn","blog_post.back_to_blog","Back to blog"),e("backBlogBtn","button.blog","Blog"),e("authorRole","blog_post.author_role","MakeTrades Expert"),e("postCtaTitle","blog_post.cta_title","Ready to launch your brokerage platform?"),e("postCtaDesc","blog_post.cta_desc","MakeTrades provides all the tools you need for a successful start"),e("postCtaBtn","blog_post.cta_button","Request demo"),e("relatedTitle","blog_post.related","Related articles"),e("postCopyright","footer.copyright","Â© 2026 MakeTrades. All rights reserved.");const n=document.getElementById("backBlogBtn");n&&(n.href=`/blog.html?lang=${u}`);const r=document.getElementById("errorBackBtn");r&&(r.href=`/blog.html?lang=${u}`)}async function P(e){var o;const n=u;u=e,document.documentElement.lang=e,document.querySelectorAll(".lang-btn").forEach(t=>t.classList.remove("active")),(o=document.querySelector(`[data-lang="${e}"]`))==null||o.classList.add("active");const r=new URL(window.location.href);r.searchParams.set("lang",e);let a=T();if(a){const t=a.replace(new RegExp(`-${n}$`),`-${e}`);r.searchParams.set("slug",t),a=t}window.history.replaceState({},"",r.toString()),q=await x(e),$(),D(),a&&A(a)}function R(e){document.title=e.meta_title||`${e.title} | MakeTrades`;const n=document.getElementById("page-description");n&&(n.content=e.meta_description||e.excerpt);const r=document.getElementById("page-keywords");r&&e.tags&&(r.content=e.tags.join(", "));const a=document.getElementById("page-canonical");a&&(a.href=`https://maketrades.info/blog-post.html?slug=${e.slug}`);const o=document.getElementById("og-title");o&&(o.content=e.title);const t=document.getElementById("og-description");t&&(t.content=e.excerpt);const s=document.getElementById("og-image");s&&(s.content=e.image_url||"https://maketrades.info/og-image.jpg");const l=document.getElementById("og-url");l&&(l.content=`https://maketrades.info/blog-post.html?slug=${e.slug}`);const d=document.getElementById("twitter-title");d&&(d.content=e.title);const c=document.getElementById("twitter-description");c&&(c.content=e.excerpt);const g=document.getElementById("twitter-image");g&&(g.content=e.image_url||"https://maketrades.info/twitter-image.jpg");const h={"@context":"https://schema.org","@type":"BlogPosting",headline:e.title,description:e.excerpt,image:e.image_url,author:{"@type":"Person",name:e.author},publisher:{"@type":"Organization",name:"MakeTrades",logo:{"@type":"ImageObject",url:"https://maketrades.info/logo.svg"}},datePublished:e.created_at,dateModified:e.updated_at,mainEntityOfPage:{"@type":"WebPage","@id":`https://maketrades.info/blog-post.html?slug=${e.slug}`}},f=document.getElementById("structured-data");f&&(f.textContent=JSON.stringify(h));const y={"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:[{"@type":"ListItem",position:1,name:"MakeTrades",item:"https://maketrades.info"},{"@type":"ListItem",position:2,name:"Blog",item:"https://maketrades.info/blog.html"},{"@type":"ListItem",position:3,name:e.title}]},p=document.getElementById("breadcrumb-data");p&&(p.textContent=JSON.stringify(y))}async function U(e){try{await B.rpc("increment_post_views",{post_id:e})}catch(n){console.error("Error incrementing views:",n)}}async function A(e){const n=document.getElementById("loading"),r=document.getElementById("error"),a=document.getElementById("post-content");n&&(n.style.display="block"),r&&(r.style.display="none"),a&&(a.style.display="none");try{const{data:o,error:t}=await B.from("blog_posts").select("*").eq("slug",e).eq("language",u).eq("published",!0).maybeSingle();if(t)throw t;if(!o){n&&(n.style.display="none"),r&&(r.style.display="block");return}R(o),U(o.id);const s=document.getElementById("post-title");s&&(s.textContent=o.title);const l=document.getElementById("post-excerpt");l&&(l.textContent=o.excerpt);const d=document.getElementById("post-category");d&&(d.textContent=o.category||"");const c=document.getElementById("post-date");c&&(c.textContent=new Date(o.created_at).toLocaleDateString(C(),{year:"numeric",month:"long",day:"numeric"}),c.setAttribute("datetime",o.created_at));const g=document.getElementById("post-reading-time");g&&(g.textContent=`${o.reading_time||5} ${i("blog_post.min_read","min read")}`);const h=document.getElementById("post-author");h&&(h.textContent=o.author);const f=document.getElementById("post-image");f&&(f.src=o.image_url||"https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=800",f.alt=o.title);const y=document.getElementById("post-text");y&&(y.innerHTML=o.content);const p=document.getElementById("post-tags");p&&o.tags&&o.tags.length>0&&(p.innerHTML=`<strong>${i("blog_post.tags","Tags:")}</strong> `+o.tags.map(b=>`<span class="tag">${b}</span>`).join("")),O(o.category,o.id),n&&(n.style.display="none"),a&&(a.style.display="block")}catch(o){console.error("Error loading blog post:",o),n&&(n.style.display="none"),r&&(r.style.display="block")}}async function O(e,n){const r=document.getElementById("related-posts-grid");if(r)try{const{data:a,error:o}=await B.from("blog_posts").select("*").eq("language",u).eq("published",!0).eq("hidden_from_users",!1).eq("category",e).neq("id",n).order("created_at",{ascending:!1}).limit(3);if(o)throw o;if(!a||a.length===0){const t=document.querySelector(".related-posts");t&&(t.style.display="none");return}r.innerHTML=a.map(t=>`
      <a href="/blog-post.html?slug=${t.slug}&lang=${u}" class="blog-card fade-in">
        <img src="${t.image_url||"https://images.pexels.com/photos/6801648/pexels-photo-6801648.jpeg?auto=compress&cs=tinysrgb&w=400"}"
             alt="${t.title}"
             class="blog-card-image"
             loading="lazy">
        <div class="blog-card-content">
          <h3>${t.title}</h3>
          <p>${t.excerpt}</p>
          <div class="blog-card-meta">
            <span>${t.author}</span>
            <span>&bull;</span>
            <time datetime="${t.created_at}">
              ${new Date(t.created_at).toLocaleDateString(C())}
            </time>
          </div>
        </div>
      </a>
    `).join("")}catch(a){console.error("Error loading related posts:",a)}}function M(e){e.classList.add("active"),e.setAttribute("aria-hidden","false")}function E(e){e.classList.remove("active"),e.setAttribute("aria-hidden","true")}function _(e,n){const r=e.closest(".form-field");if(!r)return;e.classList.add("input-error");const a=document.createElement("div");a.className="field-error",a.textContent=n,r.appendChild(a),requestAnimationFrame(()=>a.classList.add("visible"))}function j(e){var r;const n=e.closest(".form-field");n&&(e.classList.remove("input-error"),(r=n.querySelector(".field-error"))==null||r.remove())}function N(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function z(){const e=document.getElementById("demoModal");e&&E(e);const n=document.getElementById("bonusModal");if(n){M(n);const r=n.querySelector(".modal-close");r==null||r.addEventListener("click",()=>E(n),{once:!0}),n.addEventListener("click",a=>{a.target===n&&E(n)},{once:!0})}}async function H(e){var L;e.preventDefault();const n=e.target;n.querySelectorAll(".field-error").forEach(m=>m.remove()),n.querySelectorAll(".input-error").forEach(m=>m.classList.remove("input-error"));const r=n.querySelector('input[name="name"]'),a=n.querySelector('input[name="email"]');n.querySelector('input[name="telegram"]');const o=n.querySelector('input[name="broker_experience"]:checked'),t=n.querySelector(".radio-group"),s=n.querySelector('input[name="not_robot"]'),l=s==null?void 0:s.closest(".checkbox-field"),d=(L=l==null?void 0:l.parentElement)==null?void 0:L.querySelector(".checkbox-error");let c=!1;if(r.value.trim()||(_(r,i("error.name_required","Please enter your name")),c=!0),a.value.trim()?N(a.value.trim())||(_(a,i("error.email_invalid","Please enter a valid email address")),c=!0):(_(a,i("error.email_required","Please enter your email")),c=!0),o){const m=t==null?void 0:t.querySelector(".radio-error");m&&m.remove(),t==null||t.classList.remove("has-error")}else{if(!(t==null?void 0:t.querySelector(".radio-error"))){const v=document.createElement("div");v.className="radio-error",v.textContent=i("error.broker_experience_required","Please select an option"),t==null||t.appendChild(v),requestAnimationFrame(()=>v.classList.add("visible"))}t==null||t.classList.add("has-error"),c=!0}if(s&&!s.checked){if(!d){const m=document.createElement("div");m.className="checkbox-error",m.textContent=i("error.robot_check","Please confirm you are not a robot"),l==null||l.after(m),requestAnimationFrame(()=>m.classList.add("visible"))}l==null||l.classList.add("has-error"),c=!0}else d&&d.remove(),l==null||l.classList.remove("has-error");if(c)return;d&&d.remove(),l==null||l.classList.remove("has-error");const g=n.querySelector('button[type="submit"]'),h=g.textContent;g.disabled=!0,g.textContent="...";const f=new FormData(n),y={name:f.get("name"),email:f.get("email"),telegram:f.get("telegram")||null,broker_experience:f.get("broker_experience")==="yes"},p=`${S}/rest/v1/demo_requests`,b={"Content-Type":"application/json",apikey:k,Authorization:`Bearer ${k}`,Prefer:"return=minimal"};try{await fetch(p,{method:"POST",headers:b,body:JSON.stringify(y)}),fetch(`${S}/rest/v1/leads`,{method:"POST",headers:b,body:JSON.stringify({name:y.name,email:y.email,telegram:y.telegram,broker_experience:y.broker_experience,source:"blog",language:u})}).catch(()=>{})}catch{}finally{g.disabled=!1,g.textContent=h}n.reset(),z()}function J(){const e=document.getElementById("demoModal"),n=document.getElementById("postCtaBtn");n==null||n.addEventListener("click",()=>{e&&M(e)}),document.querySelectorAll(".modal-close").forEach(o=>{o.addEventListener("click",()=>{const t=o.closest(".modal");t&&E(t)})}),document.querySelectorAll(".modal").forEach(o=>{o.addEventListener("click",t=>{t.target===o&&E(o)})}),document.addEventListener("keydown",o=>{o.key==="Escape"&&document.querySelectorAll(".modal.active").forEach(t=>{E(t)})});const r=document.getElementById("demoForm");r==null||r.addEventListener("submit",H),r==null||r.querySelectorAll("input").forEach(o=>{o.addEventListener("input",()=>j(o))});const a=r==null?void 0:r.querySelector('input[name="not_robot"]');a==null||a.addEventListener("change",()=>{var s;const o=a.closest(".checkbox-field"),t=(s=o==null?void 0:o.parentElement)==null?void 0:s.querySelector(".checkbox-error");a.checked&&(t==null||t.classList.remove("visible"),setTimeout(()=>t==null?void 0:t.remove(),200),o==null||o.classList.remove("has-error"))}),r==null||r.querySelectorAll('input[name="broker_experience"]').forEach(o=>{o.addEventListener("change",()=>{const t=o.closest(".radio-group"),s=t==null?void 0:t.querySelector(".radio-error");s&&(s.classList.remove("visible"),setTimeout(()=>s.remove(),200)),t==null||t.classList.remove("has-error")})})}function D(){const e=document.getElementById("demoForm");if(!e)return;((s,l,d)=>{const c=document.getElementById(s);c&&(c.textContent=i(l,d))})("demoModalTitle","modal.demo_title","Request Demo Account");const r=e.querySelector('input[name="name"]'),a=e.querySelector('input[name="email"]'),o=e.querySelector('input[name="telegram"]');r&&(r.placeholder=i("form.name","Your name")),a&&(a.placeholder=i("form.email","Email")),o&&(o.placeholder=i("form.telegram","Telegram (optional)")),e.querySelectorAll('[data-translate="form.broker_experience"]').forEach(s=>{s.textContent=i("form.broker_experience","Have you had experience working as a broker?")}),e.querySelectorAll('[data-translate="form.yes"]').forEach(s=>{s.textContent=i("form.yes","Yes")}),e.querySelectorAll('[data-translate="form.no"]').forEach(s=>{s.textContent=i("form.no","No")}),e.querySelectorAll('[data-translate="form.not_robot"]').forEach(s=>{s.textContent=i("form.not_robot","I am not a robot")});const t=e.querySelector('button[type="submit"]');t&&(t.textContent=i("form.request","Request"))}async function I(){var n;document.documentElement.lang=u,document.querySelectorAll(".lang-btn").forEach(r=>{r.classList.remove("active"),r.addEventListener("click",()=>{const a=r.getAttribute("data-lang");a&&P(a)})}),(n=document.querySelector(`[data-lang="${u}"]`))==null||n.classList.add("active"),q=await x(u),$(),D(),J();const e=T();if(e)A(e);else{const r=document.getElementById("error"),a=document.getElementById("loading");r&&(r.style.display="block"),a&&(a.style.display="none")}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I();
